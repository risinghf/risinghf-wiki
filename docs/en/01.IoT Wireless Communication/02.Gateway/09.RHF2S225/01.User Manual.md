---
title: User Manual
date: 2025-06-16 10:10:10
permalink: /01/02/09/01/
---

# RHF2S225 User Manual

## Preface

RHF2S225 is an internet of things LoRaWAN gateway designed and developed by Ruixing Hengfang Network (Shenzhen) Co., Ltd., which focuses on outdoor application scenarios. It is internally equipped with a low-cost and low-power internet of things SOC--HLK-7628N with MediaTek MT7628AN as its core, launched by hailingke. Its CPU frequency is as high as 580M, and it has strong data processing capability. In addition, RHF2S225 is equipped with an SX1302 LoRa module, a GPS module, an Ethernet interface, an LTE module (optional), a temperature sensor, a USB interface, and an SD expansion bit.  

This article will introduce in detail how to use the built-in Web management platform of RHF2S225 to operate the gateway, and then cooperate with the RisingHF service provided by the LoRaWAN-IoTSquare and a node to build a complete communication example to demonstrate the actual use process of the Gateway, and then introduce the method of upgrading the firmware. Finally, this article will give some solutions to common problems, hoping to help users. 

## Know Your Gateway

### Functions supported by the Gateway

* It has stable and reliable LoRaWAN communication capability, and the communication range covers multiple frequency bands with 470, 868 and 915 as the center frequency points. 
* Supports ethernet, LTE, and WiFi. 
* WiFi supports AP, STA and AP + STA hybrid mode, and the wireless speed can reach 300M. 
* Support SD card and USB storage device expansion. 
* Supports GPS atomic time synchronization LoRaWAN time. 
* Built-in and easy-to-use Web gateway management platform. 

### External physical interface of the Gateway

The Gateway has four antenna ports, one external power access port and one RJ45 port. 

- ANT1:LoRa antenna port. 
- ANT2:GPS antenna port. 
- ANT3:LTE antenna port. 
- ANT4:WiFi antenna port. 
- Power: external Power input interface, Power input range DC12V to 28v. 
- RJ45: The RJ45 network port. 

### Power supply

RHF2S225 uses standard AC/DC industrial power supply for power supply. RHF2S225 is equipped with an industrial-grade IP67 waterproof AC/DC power supply with high reliability. 

### Backhaul network

RHF2S225 supports a variety of backhaul network methods, such as Ethernet, LTE, and WiFi. 

Ethernet: using a network cable to connect the RJ45 port of the gateway to the LAN port of the next-level router can realize 10/100m Ethernet connection to the server. 

LTE: please open the upper cover of the equipment, insert the SIM card, and then power on the system again. 

WiFi: Open the built-in web interface, select [network configuration]->[WiFi Station] menu, and enter the correct WiFi name and password through [WiFi Station settings] to connect to the superior router. **Note: the stability of WiFi network return is not guaranteed. We recommend that you do not use WiFi return in the production environment. **

You can log on to the built-in web interface to configure the priority of the backhaul network. 

### Debugging interface

RHF2S225 provides a variety of debugging interfaces. 

- web interface
- Serial port debugging
- SSH logon

This topic describes how to use the debugging interface on the web interface. 

## Web management platform of Gateway

The built-in Web management platform of RHF2S225 is designed to provide users with access to gateways. It is very convenient and easy to use. Users can easily manage and operate their own gateways through it. This chapter describes each part of the management platform and how to use it. 

### Obtain the IP address

- Open the web interface via LAN

Connect the device to the LAN through the network cable, and use the DHCP service of the superior router to query the IP address of the device in the LAN. After obtaining the IP address of the device, open the IP address through the browser to enter the built-in web interface of the device. 

- Open the web interface via WiFi

Scan the WiFi signal on the computer, find the device whose SSID is RHF2S225_XXXXXX and connect it. After the computer is connected to the device, the default IP address is 192.168.100.1. After obtaining the IP address of the device, open 192.168.100.1 through the browser to enter the built-in web interface of the device. Default SSID and password for WiFi:

SSID: RHF2S225_XXXXXX

Password: RisingHF_XXXXXX

Note: "XXXXXX" ends with 3bytes after the MAC address of the device. If there are letters, use uppercase letters. 

### Go to the logon page of the Web management platform

Login conditions: **the Gateway and the computer are in the same LAN** or **the computer is used as the AP hotspot of the STA device to connect to the gateway WiFi**. 

Logon URL: the IP address of the Gateway. 

Default Password: risinghf

When the Gateway and the computer are in the same LAN, enter the IP address of the gateway in the browser to enter the login page of the Gateway's Web management platform. The login page is shown in the following figure. 

![image-20250617100133654](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617100133654.png)

### Log on to the Web management platform

Enter the default password to log on to the Web management platform. 

Default login password: risinghf (click the Update your password button below the password input box on the login page to change the default password on the password change page). 

The following figure shows the management platform after successful logon. 

![image-20250617095634009](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617095634009.png)

As you can see, the management platform consists of six parts: device information, server configuration, network configuration, system configuration, log download, and system operation. The following is a detailed introduction to each section. 

### Change the password

Enter the original password, and then enter the new password and confirm the new password to change it to the new password. You need to use a new password to log on next time. 

![image-20250617095947508](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617095947508.png)

### Device

As shown in the following figure, the device information page consists of two parts: Device Information and hardware information. 

![image-20250617100028333](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617100028333.png)

#### Device Information

Device Information displays the basic information of the device, such as the device model, system time, MAC, version number, and IP address. 

#### Hardware Information

The hardware information displays the current status of the key hardware of the device. You can use this column to quickly confirm the hardware status of the device. 

* External Power: RHF2S225 only supports external power supply, and "connected" is displayed by default. 
* Ethernet: when the network cable is not connected, "not connected" is displayed; When the network cable is connected, "connected" is displayed. 
* LTE network: when dialing is successful, "Not used" is displayed; When dialing is successful, the signal quality of the current network is displayed. 
* GPS: whether the GPS module is normally identified. 
* WiFi: whether the WiFi module is properly identified. 
* Temperature: displays the temperature in the current equipment box. 
* LoRa0: When the LoRa-related service is not started, it displays "Not used"; When the LoRa-related service is started, it displays "Normal". 
  

### Server

Server configuration is a LoRa-related service, including environment bottom noise scanning and configuration of connecting servers from various manufacturers. **Note: LoRa can start only one service at a time. If a user has started one of the services and then starts another server, the device will shut down the original service and start the new service. **

#### Ambient Noise Scan

The equipment has a built-in ambient noise scan engine, which can help users scan and analyze the bottom noise of the environment on site, and detect interference signals and noises in advance when customers deploy on site. In order to realize network optimization and avoid strong interference channel frequency. 

The bottom noise scanning function is very easy to operate. You only need to fill in the start frequency point and end frequency point, and then click "Start Scan". If you only enter the starting frequency point, the default scanning bandwidth is 2MHz and the default step is 200kHz. The wider the scan bandwidth, the longer it takes. It is generally recommended to scan only 2MHz or 5MHz to cover the target operating frequency band. **Note: hardware causes that the RHF2S225xxx-470 series can only scan 470~490Mhz, the RHF2S225xxx-868 series can only scan 862~876Mhz, and the RHF2S225xxx-915 series can only scan 902~928Mhz. **

![image-20250617100718056](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617100718056.png)

Fill in the starting frequency, ending frequency, and scanning steps, and then click the Start scan button on the right. 

When the bottom noise scanning is completed, the configuration interface will display the scanning results in two forms: the bottom noise thermal distribution map represents the transient noise distribution, and the average noise distribution map represents the average noise level obtained by the frequency point during scanning. 

![image-20250617100750751](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617100750751.png)

![image-20250617100805291](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617100805291.png)

Ambient noise is an important index parameter that affects wireless communication. If you need to set up and install the Gateway on site, make a preliminary analysis of the environmental noise on site to avoid high noise or strong interference affecting the communication distance and reliability. We hope that the environmental noise will be as low as possible, but the real environment cannot be completely free of interference or noise. It is generally recommended that the ambient noise bottom be around-110dBm, which is ideal. Generally, the maximum noise is allowed to not exceed-100dBm, otherwise the communication distance will be severely limited. If the noise is above-95dBm, it is strongly recommended to change the working frequency band to avoid interference noise. 

#### Packet Forwarder Link

Supports standard Packet Forwarder to connect to servers by using dup. Generally, servers that meet the LoRaWAN standards can be connected in this way. 

Running Status: The service is not started by default, and the message "Not running" is displayed. When the user clicks start and prompts "Running", The LoRa module also starts to work. 

Gateway ID: Enter the gateway ID (note that different servers use different gateway ID naming rules). By default, RHF2S225 uses the MAC address of the Ethernet to insert FFFE as the gateway ID, which can be modified according to your needs. 

Server Address: Enter the destination server address. 

Uplink port: The uplink port number of the target server. 

Downlink Port: The downlink port number of the target server. 

Frequency Config: Select the frequency configuration file supported by the Gateway.  You can specify a frequency plan based on your needs. 

Start/Restart: Start the LoRa service. If the device starts Other LoRa-related services, the system will shut down other LoRa services and start the services. 

Close: The LoRa service is closed. 

![image-20250617101115055](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617101115055.png)

#### IoTSquare

IoTSquare([https://cloud.iotsquare.xyz](https://cloud.iotsquare.xyz/)) is a program used to connect to IoTSquare server. It is mainly composed of two parts, one is bridge and the other is Packet Forwarder. 

bridge is the core program used to connect to IoTSquare servers, Packet Forwarder is used to transmit LoRaWAN data. When the Packet Forwarder is not started, it is only used for remote device management on the server. After the Packet Forwarder is started, it can be used to remotely manage devices on the server and receive LoRaWAN data. By default, the device only starts bridge. The IoTSquare does not need to be used to configure the frequency plan for the gateway. You can select the appropriate frequency plan when registering the Gateway IoTSquare the server, and then start the Packet Forwarder component. 

![image-20230209161004622](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/13c24de683d4f71808a2d61017b08ecf.png)

Bridge Running Status: The service is started by default and the message "Running" is displayed. In this case, you only need to register with the server to remotely manage the device. If you do not want the server to manage the device, you can turn it off and prompt "Not running". 

Gateway ID: Enter the gateway ID. By default, IoTSquare use the MAC address of the Ethernet to insert FFFE as the gateway ID. You can modify it according to your needs. 

MQTT Server Address: Enter the MQTT address and port number of the target server. 

HTTP Server Address: Enter the HTTP address and port number of the destination server. 

Start/Restart: Start the bridge

Close: close the bridge. If the Packet Forwarder is also started, it will be closed together with the Packet Forwarder. 

![image-20250617101923221](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617101923221.png)

Rhf Pktfwd Running Status: The service is disabled by default. When the user clicks start, the prompt "Start" is displayed, and the LoRa module also starts to work. 

Start: start the LoRa service. If bridge is closed, start it together with bridge. If the device starts Other LoRa-related services, the system will shut down other LoRa services and start the services. 

Closed: The LoRa service is disabled. 

![image-20250617102358889](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102358889.png)

#### LoraServer

Used to connect to an open-source LoraServer. The LoRa service requires users to upload their own configuration files to the/root/loraserver directory instead of lora-gateway-bridge.toml configuration files. 

Running Status: The service is not started by default, and the message "Not running" is displayed. When the user clicks start and prompts "Running", The LoRa module also starts to work. 

Gateway ID: Enter the gateway ID (note that different servers use different gateway ID naming rules). By default, RHF2S225 uses the MAC address of the Ethernet to insert FFFE as the gateway ID, which can be modified according to your needs. 

Server Address: localhost by default. 

Uplink Port: the default port is 1700. 

Downlink Port: the default port is 1700. 

Frequency Config: Select the frequency configuration file supported by the Gateway.  You can specify a frequency plan based on your needs. 

Start/Restart: Start the LoRa service. If the device starts Other LoRa-related services, the system will shut down other LoRa services and start the services. 

Close: The LoRa service is disabled. 

![image-20250617102544059](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102544059.png)

### Network

#### WiFi

The network configuration is mainly for the WiFi of the gateway device. You can modify the default IP address, SSID username, password, and Hidden SSID. 

![image-20250617102607366](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102607366.png)

#### WiFi Station

The device provides WiFi Station mode for wireless connection to the superior router. Users can scan or fill in the WiFi name and password of the superior router to connect to the superior router. 

![image-20250617102627772](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102627772.png)

#### IP Config

When the device is connected to the network cable, the IP address dynamically assigned by the superior router is obtained through DHCP by default. If you need to set a static IP address, select "Protocol" as "Static IP", and then enter "IP Address", "Default Gateway", and "DNS". 

![image-20250617102726972](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102726972.png)

#### LTE

The detailed status of the 4G module. After the dialing is successful, the dialing system and community information are displayed. 

![image-20250617102752349](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102752349.png)

Configure the LTE dialing service. 

Auto Network: The system starts by default. When dialing, the network dialing of the operator is automatically recognized; If the dialing is unstable, the user can turn off the automatic network selection option, then the system will dial from high to low according to the signal quality of the carrier network. 

Dial Server: enabled by default. When you click close, the dialing service is disabled. 

![image-20250617102835644](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102835644.png)

#### APN Config

This page is used to query, add, and delete the APN for the LTE dialing of the Gateway. If the SIM card used by the user cannot be dialed normally, you can use this page to query or add the APN corresponding to the SIM card. 

![image-20250617102856330](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617102856330.png)

#### RSSH

This page is the port number for remote debugging of the management gateway. When the user Gateway needs remote assistance, you can enable the RSSH function and send the port number to the technical support of our company to remotely log on to the Gateway. After debugging, remember to disable RSSH. After all, enabling remote debugging will increase security risks. 

![image-20250617103752965](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617103752965.png)

#### Ping

This page is used to check whether the device can access the internet normally and whether the Gateway can directly connect to the gw.risinghf.com server. Users can customize their own server addresses. 

![image](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/372d2da9-e6c1-43c6-94db-1a4a6fb3e703.png)

#### Traceroute

This page is used to check whether the device can access the internet normally and test the route through which the gateway connects to gw.risinghf.com. Users can customize their own server addresses. 

![image](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/4f35a01d-7644-407b-8f4c-1e7af194dac2.png)

#### Host

This page is used to check whether the device can access the internet normally and test the DNS server used by the Gateway. Users can customize their own server addresses. 

![image-20250616144907030](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250616144907030.png)

#### Flow Statistics

The device provides three network interfaces br-wan (wired network), 3g-ppp0(LTE dial-up) and apcli0(WiFi). The traffic statistics are for reference only. 

![image-20250617104321275](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104321275.png)

Click the "Network Port" option to view the traffic usage of different network interfaces. 

xxx / hourly: hour traffic tatistics.

xxx / daily: daily traffic statistics

xxx / monthly: monthly traffic statistics

xxx / top 10: the amount of traffic per day, and the traffic usage in the first 10 days from more to less. 

xxx: total traffic

No Data: the interface has not used traffic.

Click Clear to clear the previously counted traffic, starting from 0. 

### System

#### Time Zone

The system uses the UTC time zone by default, which may have a time difference with the user. On this page, you can select a local time zone. 

![image-20250617104044903](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104044903.png)

#### NTP

Set up an NTP server. On this page, you can manage your own NTP servers. A maximum of five NTP servers can be created at the same time. 

![image-20250617104101541](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104101541.png)

### Log

On the log download page, you can view and download various logs related to Gateway operation. 

#### System Log

The system log records the running status of the Gateway kernel, including the running status information of the kernel. You can analyze the running status of the Gateway system. 

![image-20250617104339549](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104339549.png)

#### LTE Log

##### Example of successful dialing

When the log prompts "dial success", The dialing is successful. 

    [2025-06-16 06:11:13]->[ltestart: OK, SIM inserted]
    [2025-06-16 06:11:13]->[ltestart: OK, 89860856112490245732]
    [2025-06-16 06:11:13]->[automatically operators mode]
    [2025-06-16 06:11:14]->[ltestart: APN information: 中国移动 (China Mobile) IoT,460,24,CMMTMXAFN.HE,,]
    Calling UMTS/GPRS
    chat:  Jun 16 06:11:19 CONNECT 150000000
    Serial connection established.
    Renamed interface ppp0 to 3g-ppp0
    Using interface 3g-ppp0
    Connect: 3g-ppp0 <--> /dev/ttyUSB2
    Could not determine remote IP address: defaulting to 10.64.64.64
    local  IP address 10.195.119.174 // obtain the IP address of the carrier, indicating that the dialing is successful. The IP address is not fixed.
    remote IP address 10.64.64.64
    primary   DNS address 120.196.165.7
    secondary DNS address 221.179.38.7
    [2025-06-16 06:11:22]->[ltestart: dial success] // prompt dialing successful
    [2025-06-16 06:11:23]->[ltestart: CHINA MOBILE's 7 rssi is -51] // signal quality of current network
    IPV6CP: timeout sending Config-Requests
    [2025-06-16 06:26:23]->[ltestart: CHINA MOBILE's 7 rssi is -51]
    [2025-06-16 06:41:23]->[ltestart: CHINA MOBILE's 7 rssi is -51]

##### Dial without SIM card

    [2025-06-16 08:36:19+00:00]->[ltestart: start dial]
    [2025-06-16 08:37:20+00:00]->[ltestart: start dial]
    [2025-06-16 08:38:20+00:00]->[ltestart: start dial]
    [2025-06-16 08:39:21+00:00]->[ltestart: start dial]
    [2025-06-16 08:40:21+00:00]->[ltestart: start dial] // regular round-robin start dialing

##### APN not found

    [2025-06-16 09:17:29+00:00]->[ltestart: start dial]
    [2025-06-16 09:17:30+00:00]->[ltestart: OK, SIM inserted]
    [2025-06-16 09:17:30+00:00]->[ltestart: OK, 89860619050022383540]
    [2025-06-16 09:17:30+00:00]->[automatically operators mode]
    [2025-06-16 09:17:31+00:00]->[ltestart: NG, unsupport 2 bits mnc sim card, 460, 06] // APN not found
    [2025-06-16 09:17:31+00:00]->[ltestart: NG, unsupport 3 bits mnc sim card, 460, 061]  

##### SIM card no fee/incorrect use APN/device location no carrier network/SIM card binding function

    [2025-06-16 10:37:37]->[ltestart: OK, SIM inserted]
    [2025-06-16 10:37:37]->[ltestart: OK, 8931088517079072357F]
    [2025-06-16 10:37:37]->[automatically operators mode]
    [2025-06-16 10:37:37]->[ltestart: APN information: KPN-M2M,204,08,intelligence.m2m,,]
    [2025-06-16 10:37:55]->[ltestart: dial timeout]
    [2025-06-16 10:37:55]->[ltestart: APN dial failure]
    [2025-06-16 10:37:55]->[ltestart: APN information: Rabo Mobiel MMS,204,08,rabo,,]
    [2025-06-16 10:38:12]->[ltestart: dial timeout]
    [2025-06-16 10:38:12]->[ltestart: APN dial failure]
    [2025-06-16 10:38:12]->[ltestart: APN information: Rabo Mobiel Int.,204,08,rabo,,]
    [2025-06-16 10:38:28]->[ltestart: dial timeout]
    [2025-06-16 10:38:28]->[ltestart: APN dial failure]
    [2025-06-16 10:38:28]->[ltestart: APN information: MVNO NL,204,08,internet.mvno.mobi,mvno,mvno]
    [2025-06-16 10:38:46]->[ltestart: dial timeout]
    [2025-06-16 10:38:46]->[ltestart: APN dial failure]
    [2025-06-16 10:38:46]->[ltestart: APN information: KPN/Hi Mobiel Internet,204,08,portalmmm.nl,,]
    [2025-06-16 10:39:03]->[ltestart: dial timeout]
    [2025-06-16 10:39:03]->[ltestart: APN dial failure]
    [2025-06-16 10:39:03]->[ltestart: APN information: KPN/Hi 4G LTE Mobiel internet,204,08,KPN4G.nl,,]
    [2025-06-16 10:39:20]->[ltestart: dial timeout]
    [2025-06-16 10:39:20]->[ltestart: APN dial failure]
    [2025-06-16 10:39:20]->[ltestart: NG, 2 bits mnc dial failure, 204, 08]
    [2025-06-16 10:39:20]->[ltestart: NG, unsupport 3 bits mnc sim card, 204, 080]

##### Signal quality

After the dialing is successful, the signal quality of the current network is recorded every 15 minutes. 

    [2025-06-16 05:24:28+00:00]->[ltestart: dial success]
    [2025-06-16 05:24:28+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 05:39:29+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 05:54:29+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 06:09:29+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 06:24:29+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 06:39:29+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 06:54:29+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 07:09:29+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 07:24:30+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53]
    [2025-06-16 07:39:30+00:00]->[ltestart: CHN-UNICOM's 7 rssi is -53] // The current network signal quality is -53dbm

#### ETH Log

When the network status of Ethernet (br-wan), WiFi(apcli0), and LTE(3g-ppp0) changes, the network logs are updated. 

![image-20250616150514541](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250616150514541.png)

#### Runtime Log

Record the device boot time and the total running time of this boot, refresh the "running time" every 5 minutes, so the error is 0  ~ -5min. 

![image-20250617104355324](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104355324.png)

#### LoRa/LoRaWAN Log

Record LoRa logs (logs may not exist if pktfwd is not enabled or the process is not started). **Note: logs are not recorded in real time. **

##### stat package

The following logs belong to the pktfwd stat package. pktfwd reports the stat package regularly. 

    7 2022-11-15T00:00:17.264461Z   PKTFWD:929    time 49354473, frame PUSH_DATA, 02, 4026, 00, 8CF957FFFE6017E5, {"stat":{"time":"2022-11-15 00:00:17 GMT","lati":0,"long":0,"alti":0,"rxnb":6,"rxok":6,"rxfw":6,"ackr":100,"dwnb":6,"txnb":6,"gtss":2}} // report an stat package
    6 2022-11-15T00:00:17.266221Z   PKTFWD:402    PUSH_ACK (4026) received in 2 ms
    7 2022-11-15T00:00:17.266294Z   PKTFWD:945    time 49354475, frame PUSH_ACK, 02, 4026, 01

stat json object contains the status of the Gateway and has the following fields:

![image](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/e95e3cf5-e2ef-4a1f-bd08-d35704e0470e.png)

##### LoRaWAN uplink and downlink data packets

The following logs belong to LoRaWAN uplink and downlink data. rxpk json packets belong to uplink data packets, and data belongs to the data obtained from node application data encryption and base64 encoding. Users are mainly concerned with tmst, freq, rssi, and lsnr fields. txpk json packet belongs to the downstream data packet. You can determine the downstream data sent by the server corresponding to the upstream data based on the tmst (unit: ms) field, because the upstream tmst +1s = the downstream tmst. For example, rxpk and txpk belong to a pair of upstream data, because 2105654642+1000000=2106654642. Users are mainly concerned with tmst and freq fields. 

    7 2022-11-15T00:00:14.949014Z   PKTFWD:929    time 49352158, frame PUSH_DATA, 02, 4025, 00, 8CF957FFFE6017E5, {"rxpk":[{"jver":1,"time":"2022-11-15T00:00:14.877267Z","tmst":2105654642,"rfch":0,"chan":5,"freq":484.9,"mid":8,"stat":1,"modu":"LORA","datr":"SF7BW125","codr":"4/5","rssic":-49,"foff":-315,"rssi":-49,"lsnr":13.5,"size":14,"data":"gMuKxwCAZ/oIkAM5Q+I="}]} // LoRaWAN received uplink packets
    6 2022-11-15T00:00:14.951076Z   PKTFWD:402    PUSH_ACK (4025) received in 2 ms
    7 2022-11-15T00:00:14.951147Z   PKTFWD:945    time 49352160, frame PUSH_ACK, 02, 4025, 01
    7 2022-11-15T00:00:15.297317Z   PKTFWD:1057   PULL_RESP (4A39) push ok
    7 2022-11-15T00:00:15.297470Z   PKTFWD:945    time 49352506, frame PULL_RESP, 02, 4A39, 03, {"txpk":{"imme":false,"tmst":2106654642,"freq":505.3,"rfch":0,"powe":20,"modu":"LORA","datr":"SF7BW125","codr":"4/5","ipol":true,"size":12,"ncrc":true,"data":"YMuKxwCgtvgKimii","brd":0,"ant":0,"nhdr":false}}
    7 2022-11-15T00:00:15.297914Z     JITQ:776    enqueue: pkt 2106654642, pre 31500, post 41000, type 0, now 2106075279, delta 579363, qos 5
    7 2022-11-15T00:00:15.297990Z     JITQ:799    jit queue packets 1 (beacons: 0, ceacons: 0, downlinks: 1)
    7 2022-11-15T00:00:15.298069Z   PKTFWD:929    time 49352507, frame TX_ACK, 02, 4A39, 05, 8CF957FFFE6017E5, {"txpk_ack":{"error":"NONE","jiterr":"NONE"}}
    7 2022-11-15T00:00:15.856316Z     JITQ:789    dequeue: pkt 2106654642, pre 31500, post 41000, type 0, now 2106629201, delta 25441, qos 5
    7 2022-11-15T00:00:15.856414Z     JITQ:799    jit queue packets 0 (beacons: 0, ceacons: 0, downlinks: 0)
    7 2022-11-15T00:00:15.856450Z       RF:1202   LoRa0: lgw_send, enter 2106629201, exit 2106633681, packet 2106654642, cost 4480, diff 20961, api 4460us, lock 4463us, peek 1us, deq 5us, gps 3us, poll 5047, dly 5039

The rxpk json object contains the upstream data of the Gateway and has the following fields:

![image](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/165d7aef-58ff-412e-a409-ad3e869cba04.png)

The txpk json object contains the downstream data of the Gateway and has the following fields:

![image](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/3873a88b-ba7b-4066-a6fc-380b6f127fcb.png)

#### Temperature Log

Record the temperature in the **device box**. If the curve is disconnected, the device has been restarted. The temperature is collected every 15 minutes. 

![image-20250617104448957](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104448957.png)

### System Operation

#### Diagnosis

One-click diagnosis allows you to quickly check hardware faults. On-site construction personnel can use the shortcut key of this function to quickly diagnose the equipment to ensure the correct installation of the equipment. Perform the following steps to diagnose the device:

1. Click the "Diagnosis" button, and the interface will pop up "Whether to diagnose the device?". 
   
2. Click OK to start the diagnosis. The diagnosis progress bar is displayed on the interface. 
   
3. The diagnosis is completed and the diagnosis results are displayed on the interface. 
   

Items with successful diagnosis are displayed in **Green**, and items with failed diagnosis are displayed in **Red**. 

**Note: After the diagnosis is completed, the system will restart automatically. **

![image-20250617104559541](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104559541.png)

![image-20250617104609851](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104609851.png)

![image-20250620153433427](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250620153433427.png)

#### Reboot System

When you click the "Reboot" button, the "restart device" prompt appears. Click OK, the system will start to restart, and the system restart progress bar will pop up on the interface. After the system restarts, the original WiFi connection will be lost. Please reconnect your computer to the WiFi and login devices of the device. 

![image-20250617104923319](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104923319.png)

![image-20250617104933798](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104933798.png)

#### Backhaul Network

By configuring the priority of the backhaul network, you can preferentially select 10/100m Ethernet, LTE 4G, and WiFi as the backhaul network. The default gateway uses Ethernet as the priority network. When the user uses both Ethernet and 4G, the Ethernet network cable is automatically switched to 4G. When the customer changes the priority of the Gateway backhaul network to 4G, the Gateway automatically switches to a wired network when 4G is disconnected. 

![image-20250617104911115](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617104911115.png)

### Logout

Click the "logout" button, and the page will return to the login interface. 

### Switch between Chinese and English

On the login page and the upper right corner of the homepage, there are Chinese and English switching buttons to facilitate Chinese and English switching. 

![image-20250617105217706](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617105217706.png)

## Quick start

Let's use servers, gateways, and nodes to build a complete LoRaWAN communication example to quickly understand how to use the Gateway. 

Prepare the environment:

* LoRa server:[IoTSquare](https://cloud.iotsquare.xyz/). 
  
* LoRa Gateway: RHF2S225. 
  
* LoRa node: [RHF3M076B](https://wiki.risinghf.com/zh/01/01/05/01/#%E4%BA%A7%E5%93%81%E7% AE %80%E8%BF%B0) developed and produced by our company. 
  

In addition, a computer and a router connected to the Internet are required, and the RHF2S225 gateway and the computer are connected to the router to form a local area network (the gateway is connected by Ethernet). Then, log on to the router management interface on the computer to query the IP address of the Gateway so that you can log on to the Web management platform to operate the Gateway later. 

### Log on to the server

Access the [IoTSquare](https://cloud.iotsquare.xyz/) server on the browser of your computer and log in. Subsequent registration of gateways and devices must be completed on the [IoTSquare](https://cloud.iotsquare.xyz/) server. 

**Note: If you do not have an account, please communicate with our company for business and help you register an account. **

### Register a Gateway

On the server homepage, choose [Gateway Management]->[add gateway] to register a gateway. 

![image-20230531180322605](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/image-20230531180322605.png)

![image-20250617111240460](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250617111240460.png)

* Gateway Name: name the Gateway according to your preference. 
  
* Gateway ID: Enter the gateway ID IoTSquare the Gateway web interface. 
  
* Gateway type: RHF2S225 (do not select an error). 
  
* Frequency region/subnet range: the frequency area must correspond to the frequency supported by the LoRa module. Select AU915 and select 0-7 for the subnet type. 
  
* Downstream transmission power of the Gateway: 27. 
  

You can click OK to add the remaining information. After the gateway is added, you can see that the gateway is already online. After the server and Gateway are ready, register the device. 

### Register a node

Click [Application Management]-> [add application]. 

![image-20230531151058124](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/image-20230531151058124.png)

Enter the application name in the displayed application window and click OK. 

![image-20230531151138488](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/image-20230531151138488.png)

On the Application Management page, click Add device.

![image-20230531151428435](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/image-20230531151428435.png)

Select add OTAA device and fill in the relevant information.

![image-20250618155328889](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/image-20250618155328889.png)

DevEUI, AppEUI, and AppKey are directly generated by the system. In the future, you need to use the AT command to set them to nodes. Of course, you can also use the AT command to query DevEUI and AppEUI from the device, and then fill them in the DevEUI and AppEUI input boxes in the preceding figure respectively. However, AppKey cannot be queried and can only be generated by the system before being set to the device. 

### Set nodes

Connect RHF3M076B to the computer by using USB cable, open the serial port assistant, and set the DevEUI, AppEUI, and AppKey generated when adding the device to the node in the previous section. The instructions for setting the DevEUI, AppEUI, and AppKey for the RHF3M076B device are as follows:

    AT+ID=DevEui,"4E-F2-CD-92-C6-91-05-80"
    AT+ID=AppEui,"79-FE-C2-6F-61-6C-15-0B"
    AT+KEY=AppKey,"33-AF-BE-E0-A1-26-AD-39-6D-79-F8-5E-8A-C0-88-BB"

In addition, in order to ensure the normal communication between the device and the gateway, you need to set the frequency area/subnet range of the device to be consistent with the one entered when registering the gateway, that is, AU915/CH\_00-07\_64, the command for setting the frequency area and subnet type for the RHF3M076B device is as follows:

    AT+DR=AU915
    AT+CH=NUM,0-7

### Start LoRa service

After the Gateway and the device are registered, and the device is set correctly, you can start the Lora service. Here we use IoTSquare service. 

1. Open the gateway web interface \[Server Configuration \]->\[IoTSquare\] and change the gateway ID column in the following figure to the gateway ID generated when the gateway is registered. The two must be consistent. 
   
2. The MQTT Server address and HTTP server address are correct and do not need to be changed. 
   
3. Click the "restart" button at the bottom left to restart the bridge. 
   
4. Click the Start button on the right to start the Packet Forwarder-Rhf Pktfwd. 
   

When the running status of the Rhf Pktfwd changes to started, normally, IoTSquare service starts. 

![image-20230531151748936](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/image-20230531151748936.png)

You can check the status of the gateway device on the server to check whether the IoTSquare is started successfully. 

![image-20230531151714967](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/image-20230531151714967.png)

### Send and receive data

At this point, all the preparation steps have been completed, and the server, Gateway, and node can communicate normally. 

Since our registered node works in ClassA mode, we ask the device to send an Uplink Packet to test whether the communication is normal. 

Before sending data, add the RHF3M076B node to the LoraWAN communication network:

    AT+JOIN

After the AT + JOIN command returns successfully, the node starts to send data:

    AT+CMSG=testmsg

As shown in the following figure, the server has received a message from the device transferred by the Gateway. 

![image](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/RHF2S025B/user_manual/2ea682c5-c677-4153-b3f5-1b57c922d213.png)

**Note: the above AT command is only applicable to RHF3M076B and other node devices produced by Ruixing Hengfang. If users use nodes from other companies, please refer to the corresponding user manual. **

## LED indicator light

The LED lamp with 7 indication functions of the equipment indicates what kind of working state the equipment is in, but it is not connected to the shell. Users need to open the lid to see the indication. 

<table>
	<tr>
		<th> LED </th>
		<th> Status </th>
		<th> description </th>
	</tr>
    <tr>
        <td> Power LED </td>
        <td> long bright </td>
        <td>19V AC/DC industrial power supply </td>
    </tr>
    <tr>
        <td rowspan = "4"> System LED </td>
        <td> long bright </td>
        <td> starting </td>
    </tr>
    <tr>
        <td> Heartbeat flash </td>
        <td> The system runs normally </td>
    </tr>
    <tr>
        <td> slow flash </td>
        <td> restart the device by pressing the RESET button </td>
    </tr>
    <tr>
        <td> flash </td>
        <td> restore factory equipment by pressing the RESET for 5 seconds </td>
    </tr>
    <tr>
        <td rowspan = "2"> 4G LED </td>
        <td> slow flash </td>
        <td>4G module standby </td>
    </tr>
    <tr>
        <td> flash </td>
        <td> dialed successfully </td>
    </tr>
    <tr>
        <td rowspan = "2"> WiFi LED </td>
        <td> long red light </td>
        <td> The STA mode is not connected to the superior router </td>
    </tr>
    <tr>
        <td> long green light </td>
        <td> connect to the superior router in STA mode </td>
    </tr>
    <tr>
        <td rowspan = "2"> LoRa LED </td>
        <td> long red light </td>
        <td>LoRa module standby </td>
    </tr>
    <tr>
        <td> long green light </td>
        <td> start LoRa module </td>
    </tr>
    <tr>
        <td rowspan = "2"> USB LED </td>
        <td> destroy </td>
        <td> USB not inserted </td>
    </tr>
    <tr>
        <td> long bright </td>
        <td> insert USB</td>
    </tr>
    <tr>
        <td rowspan = "2"> RJ45 LED </td>
        <td> destroy </td>
        <td> network cable not connected </td>
    </tr>
    <tr>
        <td> flicker </td>
        <td> Connect network cable </td>
    </tr>
</table>
## Key function

The device has two buttons, but it is not connected to the shell. The user needs to open the lid to operate. 

<table>
    <tr>
        <th> button </th>
        <th> actions </th>
        <th> function </th>
    </tr>
    <tr>
    	<td rowspan = "2"> RESET </td>
        <td> short Press </td>
        <td> restart the device </td>
    </tr>
    <tr>
        <td> long press for 5 seconds </td>
        <td> restore factory equipment </td>
    </tr>
    <tr>
        <td> WPS </td>
        <td> retain </td>
        <td> retain </td>
    </tr>
</table>
## Firmware upgrade

RHF2S225 supports the function of inserting USB flash drive to automatically upgrade firmware. 

Before upgrading, you must meet the following requirements:

1. Make sure that the partition format of the U disk is MBR (GPT format is not currently supported). 
   
2. Make sure that the file system of the U disk is FAT or FAT32 (recommend). If not, reformat it. 
   
3. Make sure that the name of the firmware to be upgraded in the USB flash drive is firmware.bin. 
   

The upgrade procedure is as follows:

1. Disconnect the external power supply of the Gateway. 
   
2. Insert the USB flash drive. 
   
3. Power on again. 
   

At this point, if the Gateway detects the USB flash drive and meets the upgrade conditions, the USB LED will flash and the System indicator -- System LED is off, indicating that the Gateway has entered the USB flash drive upgrade mode. 

If the upgrade is successful, the System LED indicator turns solid, indicating that the new system has started, but it is not fully ready until you see the System LED start flashing. At this point, the new version of the firmware has been successfully upgraded. The device information page of the web management platform can also see the version number of the new firmware.

## FAQ

Q1: the system time is incorrect, which is sometimes different from the local time. 

A1: The system uses the UTC time zone by default, so it is sometimes different from the local time of the user. On the web page, choose system configuration> time zone management to select a local time zone. 



Q2: The LoRa component displays “Not used". 

A2: When the unused equipment leaves the factory, the LoRa module does not work by default, so it is normal to display "Not used. When a user starts a LoRa-related service, the LoRa component displays "normal". If the LoRa component displays an exception, contact the manufacturer in time. 



Q3: Can I connect to multiple LoRaWAN servers at the same time? 

A3: no. The LoRa module in the gateway is an exclusive resource. Only one LoRa-related service can be started at the same time. 



Q4: Why does the background noise scanning function always fail? 

A4: First, make sure that the gateway is connected to the board normally, and then make sure that the start frequency and end frequency of the scan are incorrectly filled. Of course, the scan range may be too large, resulting in timeout. 



Q5: Why does one-click diagnosis succeed but still fail to receive LoRaWAN data from the node? 

A5: One-click diagnosis only diagnoses the hardware related to the LoRa service. Successful diagnosis only means that the hardware is fine. However, LoRaWAN received data is also related to the configuration of servers, gateways, and nodes. We recommend that you check whether the frequency configuration and registration information of servers, gateways, and nodes are correct. 



Q6: The Gateway has been registered to the LoRaWAN server, but why is the gateway not online on the server? 

A6: Follow these steps to troubleshoot the problem:

1. Check whether the network return is normal. 
   
    * If wired is used, check whether the LED of RJ45 flickers. Flickering indicates that the connection is normal. If not, check whether the network cable or RJ45 interface and other hardware are normal. 
      
    * If 4G is used, please check whether the 4G LED flickers. Flickering indicates that the 4G number is successfully dialed. If it does not flickers, please check whether the 4G antenna is connected, whether the SIM card is plugged in, whether the SIM card is overdue, whether the SIM card will be bound to the device, etc. 
      
    * If you are using WiFi, check whether the WiFi is connected to the on-line router. On the web page, check whether the connection is displayed on the network configuration-> WiFi Station-> connect to the superior router. If it is not connected, check whether the WiFi antenna is connected and whether the "WiFi name" and "WiFi password" connected to the superior router are correct. 
    
2. Check whether the server address and port number are correctly filled in. Generally, this information can be obtained by consulting the user manual of the server or contacting the technical support of the server manufacturer. 
3. Check whether the network of the device accesses the server normally. In the \[Network Configuration \]->\[Ping\] function, enter the IP address of the server. If the ping fails, contact the network operator or server manufacturer to check whether the server cannot be accessed due to firewall problems. If you use 4G dialing, check whether the carrier has an IP whitelist mechanism. 



Q7: Why is 4G dialing disconnected and redialed every few minutes? 

A7: confirm the following two points:

1. Check whether the dialed APN is correct with the network operator. If the error is incorrect, use the \[network configuration]->\[APN configuration] menu to delete the incorrect APN and enter the correct APN. 
   
2. Whether the operator has an IP address whitelist mechanism. If you have an IP address whitelist, add the server configuration-> IoTSquare-> MQTT Server address (for example, cloud.iotsquare.xyz) to the whitelist. 