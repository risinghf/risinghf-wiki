---
title: Uer Manual
date: 2021-09-14 15:44:17
permalink: /01/02/02/04/
---
## 1. Quick Start

This chapter introduces apperance of the gateway and show how to setup your gateway and connect it to a cloud LoRaWAN server.

### 1.1. Get to know about your gateway

RisingHF RHF2S208 LoRaWAN gateway integrates a high performance high reliabitliy ARM cortex A53, 1 or 2xSX1301 LoRa core processor, a 4G LTE module, a GPS module, a WiFi module, temperature monitor, RTC, and power management unit. The RHF2S208Bxx series would have a internal battery for backup which could support over 5 hr duration without external power. Rather than logging into the gateway and doing operation with command in the linux environment, a web-based utility is built in which help customer use the device much easier.

There are 4 antenna ports, a external power input port, a RJ45 port, and a USB debug port for the device.

>ANT1： ANT1 is for LoRa antenna
>
>ANT2：ANT2 is not used at this moment
>
>ANT3：ANT3 is for GPS antenna
>
>ANT4：ANT4 is for WiFi Antenna
>
>ANT5：ANT5 is for LTE Antenna
>
>Power: External power supply input port, DC12 to 28V.
>
>RJ45: RJ45 port, ethernet and PoE power injector.
>
>USB: USB port for debug.

![image-20210910162604120](https://wiki.risinghf.com/upload/img/c5ca2fc1f93094fa7a184dcb76217d84.png)



### 1.2. Set up your gateway

Please set up your gateway like shown below.

![image-20210910162705492](https://wiki.risinghf.com/upload/img/8e292345323f82e8d86faa5252a139ca.png)

#### 1.2.1 Power supply

RHF2S208 could be powered by both AC/DC adapter and PoE injector. An high reliability industrial IP67 AC to DC adapter is configured for each gateway when it comes out from the factory. Specially, a 3.2Ah LiFePo4 battery is integrated for RHF2S208Bxx. All the source could be injected into the gateway, which could be switched automatically based on the logic the AC/DC adapter \> PoE injector \> battery.

#### 1.2.2 Networking

RHF2S208 support serveral kinds of way for networking backhaul. Please uncover the enclosure and install the sim card if you want to use the cellular network. Or a cable is needed to be connected to a router to use the 10/100m ethernet. And you can set the priority of the two selection on the web-based utility.

#### 1.2.3 Debug and Configure

Several debug interface could be used:

1.  Connect the gateway to your PC with USB to UART interface

2.  DHCP in a LAN

3.  Wireless access via WiFi

Please use **ExtraPutty** to access into your gateway and debug and configure it.

### 1.3. Log into your gateway

You can log into your gateway with UART, DHCP or WiFi.

Default account information :

User: rxhf

Password: risinghf

#### 1.3.1 Login with COM port

Before connecting your gateway to the PC, please install FTDI USB to UART driver. Connect your gateway to PC with a type A female to type A female USB cable and you will find a COM port. Open the Etraputty and select “Serial” connection type with COM3 port for example and baudrate=115200.

![image-20210910162938010](https://wiki.risinghf.com/upload/img/9f07832acf3a9318caa97060a4fd69d5.png)

Then input user name “rxhf” and password “risinghf” to log into the system.

![image-20210910163002332](https://wiki.risinghf.com/upload/img/9c6bdc7e7aa27861b2e441fc3555b1c9.png)

#### 1.3.2 Login with DHCP

Connect your gateway with DHCP router, log in router or scan IP to get RHF2S208 ip. Hostname of your gateway is "RHF2S208".

After get ip, user could use SSH tool to log the device check or set configuration.

For example, use PuTTY under Windows and use ssh command under Linux. SSH port is 22. To log in device of whose ip is 192.168.0.182.

Windows:

![image-20210910164456952](https://wiki.risinghf.com/upload/img/0f68889ea38831c99268da6a50140eb9.png)

Linux:

```shell
ssh rxhf@192.168.0.182
```



#### 1.3.3 Login with WiFi

Scan the WiFi signal on your computer, find the device with SSID RHF2S208_XXXXXX and connect it. After the computer is connected to the device, use the same Putty tool to connect the default ip 192.168.8.1 and port number 22 to login to the device.

The default SSID and password of WiFi.

SSID: RHF2S208_XXXXXX

Password: RisingHF_XXXXXX

:::warning

Note: "XXXXXXX" ends with 3bytes after the MAC address of the device, if there are letters, use uppercase letters.

:::

![image-20210910164607928](https://wiki.risinghf.com/upload/img/b092e075367d7700598ffde7238a4fd9.png)

![image-20210910164644555](https://wiki.risinghf.com/upload/img/fbee7ae126865e43e506a0205f2c455c.png)



### 1.4. Connect to a LoRaWAN server

The RHF2S208 integrates common procedures for connecting to LoRa servers in the web interface, and users can start the corresponding LoRa services through the web UI.

1. Open the built-in web UI configuration interface by the following ways

   1. If the computer and the gateway device are under the same LAN, you can use DHCP ip (192.168.xxx.xxx for example) to open the browser to log in the built-in web configuration interface


   2. If the computer is connected to the gateway device through WiFi, you can use the default ip 192.168.8.1 to open the browser to log into the built-in web configuration interface

2. Login to the gateway web interface

   User name: admin

   Password: admin

#### 1.4.1. Connecting to a server that supports standard packet forwarder mode

The RHF2S208 Gateway supports standard Packet Forwarder forwarding service. You can connect to any LoRaWAN server that supports this standard interface through this Packet forwarder interface. Please follow the steps below.

1. Select "LoRaWAN Related-> Packet forwarder" menu.

   ![image-20210910164819762](https://wiki.risinghf.com/upload/img/c460c1b55fb6af372e7fc798a31263b6.png)

2. Enter the Gateway ID (note that different servers will use different naming rules for the Gateway ID).

2. Enter the server address.

3. Enter the uplink and downlink server port numbers.

4. Select the frequency profile. 5.

5. Click the "Start" button. 6.

6. Confirm on the server that the gateway is online.

#### 1.4.2. Connecting to IoTSquare Server

IoTSquare (<https://iotsquare.xyz>) IoT platform is a dedicated LoRa device management platform developed by Rexing Hengfang, with functions of creating users, registering nodes, gateways, and multicast group management, etc. Currently, IoTSquare IoT platform only supports access to LoRa devices of lorawan version 1.0.2. IoTSquare now supports cn470, cn470prequel, eu868, as923, us915, au915 and other frequency bands. Users who want to use the server can send an email (support@risinghf.com) to request a test account.

Before using it, please pay attention to the [**IoTSquare IoT Platform User Manual**](https://doc.iotsquare.xyz/docs/manual/iotsquare) and follow the steps below, assuming the user already has an account on this server.

1. Get the Gateway ID of the gateway

   Login to the web interface of the gateway, enter the "Server Related->IoTSquare Bridge" menu, the "Gateway ID" text box on the page is the Gateway ID of the gateway. If the bridge is not started, users need to manually click the "Start" button to start it.
   
   ![image-20210910164943616](https://wiki.risinghf.com/upload/img/bff0f14ae726deea8e9d4711a431c6df.png)
   
2. [Register Gateway](https://doc.iotsquare.xyz/docs/manual/iotsquare/#_6-%E7%BD%91%E5%85%B3%E7%AE%A1%E7%90%86)

   Enter IoTSquare server, enter "Gateway Management->Add Gateway" menu, fill in the Gateway ID just obtained to the Gateway ID and click "Confirm Add" to register, the information about adding gateway to the server can be Check the server documentation, this document will not be described one by one.

   ![image-20210910165008002](https://wiki.risinghf.com/upload/img/32416d62e82201b2f208bf95167c71bf.png)

3. Confirm whether the gateway is online or not

   After registering the gateway successfully, you can see the gateway online under "Gateway Management->Gateway List" menu.

   ![image-20210910165040720](https://wiki.risinghf.com/upload/img/fd8ff60a415e15c50fa2f72262865bfb.png)

4. Start LoRa service

   Go to the "LoRaWAN Related -> IoTSquare" menu and click the Start button to start the LoRa service.

   ![image-20210910165100955](https://wiki.risinghf.com/upload/img/6519ca62c4156e849a340462b67a0195.png)

#### 1.4.3. Connecting to loriot servers

loriot (<https://www.loriot.io>) is a Swiss web server operator that offers LoRaWAN servers and provides free accounts for users to test and register themselves.

Before using it, please take note of loriot's online documentation <https://cn1.loriot.io/documentation> (the subdomain prefix will be different depending on the region chosen, this documentation uses the cn1.loriot.io server address as an example).

1. Get MAC address

   A label with the MAC address will be attached to the side of the device. Or you can check the MAC address information by connecting to the device's WiFi and logging into the device's built-in web interface.
   
   ![image-20210910165207609](https://wiki.risinghf.com/upload/img/2b246516d8d139d500f41543e91de854.png)
   
2. Log in to http://cn1.loriot.io to register your account, or log in directly to your account if you have already registered.

3. Click Dashboard -> Networks -> Name -> Add Gateway and select the gateway model RHF2S008/ RHF2S208.

   ![image-20210910165252550](https://wiki.risinghf.com/upload/img/cda074f5d0af76a3c23db621ba2544ec.png)

4. When registering the gateway, please select the correct RF front-end for.

   1. 868/915 MHz (SX1257)

   2. 434/470/780 MHz (SX1255)

      ![image-20210910165321555](https://wiki.risinghf.com/upload/img/f07254ecc2aaef1d6ef5579ed549dc0b.png)

5. Fill in the MAC address and the installation location information of the gateway.

   ![image-20210910165349545](https://wiki.risinghf.com/upload/img/0bf97619af2a3702e3d28ba52ec4cf18.png)

   ![image-20210910165405846](https://wiki.risinghf.com/upload/img/6c30b47c61e276dc9cd57de3b2597d1e.png)

6. Click "Register RisingHF RHF2S208 gateway" to complete the gateway registration.

7. Click the "Gateways" list to enter the gateway configuration interface.

   ![image-20210910165422839](https://wiki.risinghf.com/upload/img/a770c65b3ba5704a31a467464b00518d.png)

8. Select the correct band and frequency plan according to the gateway model. If you need more assistance please contact <support@risinghf.com>

9. Complete the gateway registration and configuration.

10. Start the loriot LoRa service in the device's web interface.

    ![image-20210910165448817](https://wiki.risinghf.com/upload/img/0c16e7b35f832ded982e85bcc1936c92.png)

11. Refresh the gateway interface to confirm that the gateway is online.

    ![image-20210910165514501](https://wiki.risinghf.com/upload/img/4631906b95d7c17c9c30391ab56591f8.png)

## 2. File System

The RHF2S208 internal firmware uses the systemd file system architecture. Users can use commands such as systemctl and journalctl to manage all services and logs.

### 2.1. Login system

User name: rxhf

Password: risinghf

### 2.2. File system

The /usr/local and /opt folders hold a lot of important files.

#### 2.2.1. /opt

/opt contains numerous server startup files and will be updated as more servers are supported by the device.

![image-20210910165655785](https://wiki.risinghf.com/upload/img/f6f4e3ab6d93b6250feeb39783b14012.png)

#### 2.2.2. /usr/local

/usr/local contains a large number of internal service startup files.

![image-20210910165727194](https://wiki.risinghf.com/upload/img/9ee211e1bb73a9bff5f10adad36a7682.png)

## 3. Built-in web configuration interface

Use the built-in web configuration interface to easily and quickly configure and manage the gateway.

user name: admin

password: admin

The built-in web configuration interface can be opened in the following two ways: 1.

1. If the computer is connected to the gateway device through WiFi, you can use the default ip 192.168.8.1 to open a browser to login to the built-in web configuration interface.

   ![image-20210910165812050](https://wiki.risinghf.com/upload/img/1556973de383973b2871a1dee0bfb5d8.png)

2. If the computer and the gateway device are under the same LAN, you can use DHCP ip (192.168.0.218 for example) to open the browser to log in the built-in web configuration interface.

   ![image-20210910165831372](https://wiki.risinghf.com/upload/img/29c7f7a7d9bf3bd5b3024b4bd713864d.png)

![](https://wiki.risinghf.com/upload/img/77f6eca37c90dc29549ca59db0de60ed.png)

![image-20210910165929255](https://wiki.risinghf.com/upload/img/987d5d73a76988480a663d457c71bee4.png)

### 3.1. Status Indicator Bar

The status indicator bar will show the status of the key components of the device. This bar allows the user to quickly confirm the status of the device's hardware components. Each component on the status bar contains three states by default.

**blue** indicates that the component is operating normally.

**Red** indicates that the component is abnormal or in alarm.

**Grey** indicates that the component is not supported by the current device model.

The indicator bar contains status indicators for a total of nine components, including external power status, internal battery power status, LTE connection status, Ethernet connection status, GPS status, WiFi status, device internal temperature, LoRa component 0, and LoRa component 1.

![image-20210910170011023](https://wiki.risinghf.com/upload/img/36b0b037f49b162c5fb6946e7b41ddc4.png)

The different status displays are illustrated below with the external power status as an example.

![image-20210910170025800](https://wiki.risinghf.com/upload/img/5af7ae50b6a9ed8b63115e5848f11890.png)
Indicates external power access (external industrial power access or PoE access).

![image-20210910170041424](https://wiki.risinghf.com/upload/img/4433bacf3a4372a46791153cf1b937a5.png)
Indicates that the external power supply is disconnected and is currently powered by the battery.

::: warning

Caution.

For RHF2S208Exx series gateway devices, the battery-powered status bar will show gray.

For RHF2S208xxx series gateway devices, the gateway only supports 8 channels, and only LoRa component 0 is supported internally, while LoRa component 1 will be shown in gray.

:::

### 3.2. Navigation bar

The navigation bar contains the main configuration and management items of the RHF2S208 gateway device.

Device Information: basic information of the gateway.

LoRaWAN related: scan environment bottom noise and configure connection to LoRaWAN server.

Server related: Connection to IoTSquare server management.

Network Configuration: Network function configuration.

Log Download: download gateway logs.

Firmware upgrade: gateway application upgrade.

![image-20210910170404636](https://wiki.risinghf.com/upload/img/fd827c02a151ba7700f97de58e5d981e.png)

#### 3.2.1. Device Information

The device information column will mainly display the basic information of the gateway device, including hardware information, software version, etc.

![image-20210910170443767](https://wiki.risinghf.com/upload/img/7474955766cb5793ceb5c82b83e0de1d.png)

#### 3.2.2. LoRaWAN related

Using the LoRaWAN configuration interface, the following functions can be implemented.

1. Environmental Bottom Noise Scan

   The RHF2S208 gateway has an integrated bottom noise scanning analysis engine inside, this feature will help customers to detect interfering signals and noise in advance during field deployment.

   The bottom noise scanning function is very easy to operate, you only need to fill in the start and end frequency points, and then click "Start Scan". If you only enter the start frequency point, the default scan bandwidth is 2MHz, and the default step is 100kHz. It is generally recommended to scan only 2MHz or 5MHz to cover the target operating band.

   ![image-20210910170530352](https://wiki.risinghf.com/upload/img/00f81b60bd3c1713b1c3d95699fe7ced.png)

   When the bottom noise scan is complete, the configuration interface will display the results in two forms: a bottom noise thermal map indicating the transient noise distribution, and an average noise map indicating the average noise level obtained at that frequency point during the scan.

   ![image-20210910170550699](https://wiki.risinghf.com/upload/img/244795e8d92ae76c5b9b48ea4b67199d.png)

   ![image-20210910170559668](https://wiki.risinghf.com/upload/img/7ecb8b260175374b18d3784690fb887d.png)

2. Packet forwarder

   Gateway ID: Enter the gateway ID (note that different servers will use different naming rules for the gateway ID).

   Server address: fill in the target server address.

   Server port: Fill in the upstream port number and downstream port number to connect to the target server respectively.

   Global Configuration: Select the frequency profile supported by the gateway. Different models support different frequency plans. Please check the specification "DS11828] RHF2S208 Specification" to confirm the information before using this device.

   Click "Start" button to start the program. If the device starts other LoRa related services, the system will close the other LoRa services and start the program.

   ![image-20210910170654116](https://wiki.risinghf.com/upload/img/e608d29a504ce5770ed5c2fc850cc138.png)

3. IoTSquare

   IoTSquare ([https://IoTSquare.xyz](https://iotsquare.xyz/)) is a program used to connect to the IoTSquare server, users need to set the "Server Related->IoTSquare
   Bridge" menu, and click "Start" button to start the program. If the device starts other LoRa related services, the system will close the other LoRa services and start the program.

   ![image-20210910170717718](https://wiki.risinghf.com/upload/img/00295ad97400e4f34c0f8234c5f93672.png)

   ![image-20210910170726474](https://wiki.risinghf.com/upload/img/d37a47a2dd2c3d8499632dc47278002c.png)

4. Orbiwise

   Orbiwise is a web server operator in India that provides LoRaWAN server. This server does not require a registered gateway, but only requires contacting the server manufacturer for permission verification to connect to the server. The user only needs to click the "Start" button to proceed. If the device starts other LoRa related services, the system will shut down the other LoRa services and start the program.

   ![image-20210910170741291](https://wiki.risinghf.com/upload/img/49a1b9fca4d41b9b09540102ec797c01.png)

5. loriot

   loriot (<https://loriot.io>) is a Swiss web server operator that provides LoRaWAN servers. Users only need to register their MAC address to the server, according to the server address of the registered gateway is different, you need to fill in the corresponding server address, the default gateway is cn1.loriot.io server address, and click the "Start" button to start the program. If the device starts other LoRa related services, the system will close the other LoRa services and start the program.

   ![image-20210910170809725](https://wiki.risinghf.com/upload/img/0d5a7e3e3e5018c074d5e58ce69974f8.png)

6. Aliot LinkWAN

   LinkWAN (<https://linkwan.aliyun.com>) is a LoRaWAN server under Ali cloud platform, users need to apply for gateway triplet registration to LinkWAN server from Ali and fill the information of gateway triplet to the gateway.

   product_key: the product_key of the gateway triplet.

   device_name: the device_name of the gateway triplet.

   device_secret: the device_secret of the gateway triplet.

   gateway_id: Generally the same as the device_name of the gateway triplet.

   Global Configuration: Select the frequency profile supported by the gateway.

   Click the "Start" button to start the program. If the device starts other LoRa related services, the system will shut down the other LoRa services and start the program.

   ![image-20210910170834931](https://wiki.risinghf.com/upload/img/c9558d47a1f2a45755a0b45461168230.png)

#### 3.2.3. Server-related

1. IoTSquare Bridge

   Connect to IoTSquare server for gateway management and data forwarding, which is enabled by default. After it is turned on, IoTSquare server regularly queries the status information of the gateway and facilitates remote debugging of the gateway, etc. If the gateway starts IoTSquare SDK and connects to IoTSquare server for LoRaWAN data interaction, IoTSquare Bridge must be started; if the gateway starts a third party server for LoRaWAN data interaction service, you can also start IoTSquare Bridge for device management, or You can choose to turn off and let the customer manage the device by itself.

   ![image-20210910171303370](https://wiki.risinghf.com/upload/img/b42bfd799a15dc03a1a7bf98f5879bf7.png)

#### 3.2.4. Network configuration

1. WiFi Configuration

   This is mainly for the network configuration of WiFi of the gateway device. You can change the default ip address, SSID username and password.

   ![image-20210910171347357](https://wiki.risinghf.com/upload/img/6a576a156aa6e2d972df24c970f3b21f.png)

2. APN Configuration

   This page is used to query, add and delete the APN of the gateway LTE unplugging. Users can use this page to query or add the APN corresponding to the sim card if the sim card they are using cannot be unplugged normally.

   ![image-20210910171403852](https://wiki.risinghf.com/upload/img/c61680e962d81751aacaccf9a8e26c23.png)

3. RSSH operation

   This page is to manage the gateway remote debugging port number, the user gateway need remote assistance, you can open the RSSH function, send the port number to the company's technical support can be remote login gateway. Remember to close RSSH after debugging is completed, after all, opening the remote debugging function will increase the security risk.

   ![image-20210910171427836](https://wiki.risinghf.com/upload/img/8eb0a931e4d486e5a4bd578d399d3dc7.png)

4. Ping

   This page is used to test whether the device can access the Internet normally and whether the gateway can directly connect to the gw.risinghf.com server, users can customize their own server address.

   ![image-20210910171505166](https://wiki.risinghf.com/upload/img/51b270a8e28190cace9d59a106a18846.png)

5. Traceroute

   This page is used to check whether the device can access the Internet properly, test the route through which the gateway connects to gw.risinghf.com, and users can customize their own server address.

   ![image-20210910171529546](https://wiki.risinghf.com/upload/img/1a43335fb0b2940dc50a8e37277e9d42.png)

6. Host

   This page is used to check whether the device can access the Internet properly, test the DNS server used by the gateway, and users can customize their own server address.

   ![image-20210910171556049](https://wiki.risinghf.com/upload/img/a7c1d70ae70874fcf3d3e3b2afb63ed9.png)

#### 3.2.5. Log Download

In the Log Download page, you can view and download a variety of logs related to the operation of the gateway.

1. System Log

   The system log records the logs of the gateway kernel operation, containing the status information of the kernel operation, which can be used by users to analyze the operation status of the gateway system.

   ![image-20210910171635140](https://wiki.risinghf.com/upload/img/92dbe2f14e1c059161de724a5539381e.png)

2. LTE Dialing Log

   LTE dialing log can be used to analyze the dialing history of LTE 4G and drop analysis. The system records the current 4G signal quality every 30 minutes.

   ![image-20210910171705109](https://wiki.risinghf.com/upload/img/f336780a7c1a34328316ffcb2b1c7edb.png)

3. Ethernet Log

   The Ethernet log records the connection status and disconnection history of the gateway and Ethernet.

   ![image-20210910171721506](https://wiki.risinghf.com/upload/img/bae49425941bbbea39a64a9138cf7962.png)

4. Boot time log

   The boot time log is mainly used to record the event of re-powering the gateway system to boot. We can use the boot time log to determine whether the system has power off or reboot during operation.

   ![image-20210910171752482](https://wiki.risinghf.com/upload/img/1af0e9eb72ac459bca5ea794448d8a51.png)

5. LoRa/LoRaWAN related logs

   LoRa/LoRaWAN related log will only record abnormal events during LoRaWAN operation, if the whole operation is normal, the log will be empty.

   ![image-20210910171807479](https://wiki.risinghf.com/upload/img/097923408389c854f9f920f3c0136b73.png)

6. temperature log

   The temperature log inside the gateway mainly records the ambient temperature inside the gateway shell, the temperature will be recorded according to the frequency of every 15 minutes.

   ![image-20210910171831873](https://wiki.risinghf.com/upload/img/e3a09c023647d7b2b9957361ff1f0e5b.png)

7. Power Management Log

   The power management log records logs such as system power on/off events and battery discharge. With the help of this log, users can analyze problems such as abnormal reset or reboot of the device due to power loss.

   ![image-20210910171845434](https://wiki.risinghf.com/upload/img/66dd30b880d86559cad2180c90aa6a3a.png)

#### 3.2.6. Firmware upgrade

The gateway application can be upgraded using the application package upgrade function. Please contact Rexing Hengfang Network (Shenzhen) mailbox company technicians to upgrade.

![image-20210910171924973](https://wiki.risinghf.com/upload/img/84f970a45e5d19b781698d4253f31b63.png)

### 3.3. shortcut buttons

A set of shortcut buttons are integrated in the upper right corner of web configuration interface, including shortcut keys for one-click diagnosis, system restart, backhaul network priority selection and logout login.

![image-20210910171949543](https://wiki.risinghf.com/upload/img/808a8e930af2842742cbc677e6689742.png)

#### 3.3.1. One-click diagnostics

One-click diagnostics allows for quick verification of equipment hardware failures. Site construction personnel can use this function shortcut key to quickly diagnose the equipment to ensure that the equipment is installed correctly. Follow the steps below to perform equipment diagnostic operations.

1. Click the one-key diagnostic button, and the interface will pop up "Diagnose or not diagnose the equipment".

2. Click Confirm to start diagnosis, and the interface will show the progress bar. 3.

3. When the diagnosis is completed, the interface will display the diagnosis result.

Items with successful diagnosis are displayed in **green**, and items with failed diagnosis are displayed in **red**.

![image-20210910172023978](https://wiki.risinghf.com/upload/img/c455d817e7fdb3c2ce714f1626d93c4a.png)

![image-20210910172040409](https://wiki.risinghf.com/upload/img/c3cf936f53cf3715bedc99032b420a37.png)

![image-20210910172049754](https://wiki.risinghf.com/upload/img/1aa611c757ba1cfe80a6102f010159cd.png)

::: warning

Note: The system will restart automatically when the diagnostic is complete.

:::

#### 3.3.2. System reboot

When you click the "System Reboot" button, the "Do you want to reboot the device" prompt will pop up in the interface. When you click "Confirm", the system will start to reboot and the system reboot progress bar will pop up in the interface. After the system reboot, the original WiFi connection will be lost, please reconnect your computer to the device's WiFi and log in to the device.

![image-20210910172137609](https://wiki.risinghf.com/upload/img/afdbc26101e7c244890c38f99ab0388f.png)

![image-20210910172157172](https://wiki.risinghf.com/upload/img/ed836a4d7628fdadd4ede34082bebd76.png)

#### 3.3.3. Backhaul network priority selection

By configuring the backhaul network priority, the 4G LTE method or 10/100m Ethernet priority network method can be preferred as the backhaul network. The default gateway will use Ethernet as the priority network, when the user uses both Ethernet and 4G, the Ethernet cable will automatically switch to 4G when it is unplugged. when the user modifies the gateway backhaul network priority to 4G priority, but 4G drops, the gateway will automatically switch to wired network.

![image-20210910172323919](https://wiki.risinghf.com/upload/img/9797dfdb815338a315b7454bd510faa1.png)

![image-20210910172345592](https://wiki.risinghf.com/upload/img/83889420cad8d002bc7342db69da0e28.png)

![image-20210910172359961](https://wiki.risinghf.com/upload/img/80a335a8c4b0d3e04bec6651ffc5541e.png)

#### 3.3.4. Logging out

Clicking the "Logout" button will return the page to the login screen.

## 4. LoRaWAN Server

The RHF2S208 supports connection to multiple operators' LoRaWAN servers, and users can turn on relevant services according to their needs. In addition to carrier-specific custom interface protocols, the RHF2S208 also integrates standard packet forwarder protocols.

In addition to starting LoRa services via web interface as described above, the device also supports starting LoRa services via command line method, which can make secondary development more convenient. The following are examples of LoRa services using the standard Packet Forwarder, IoTSquare and loriot.

::: warning

Note: At the same time, the RHF2S208 gateway only allows connections to one LoRaWAN server. If you need to make a server switch, be sure to shut down the previously running service first.

:::

### 4.1. Packet Forwarder

Packet Forwarder is a program provided by RisingHF to connect LoRaWAN gateways to servers. It is compatible with all the functions of standard Packet Forwarder and provides the most basic LoRa packet forwarding functions, but basically does not handle LoRaWAN protocol related content itself.

Depending on the server support, lora_pkt_fwd supports json configuration file, with a fixed file name of global_conf.json or local_conf.json in the working directory for Packet0
Forwarder configuration file, global_conf.json and local_conf.json support exactly the same format, local_conf.json has a higher priority, Packet Forwarder reads global_conf.json and local_conf. json, and overwrites global_conf.json with the configuration in local_conf.json.

You can find all server configuration files and frequency configuration files in the folder /opt/pktfwd/cfg, including 434MHz, 470MHz, 780MHz, 868MHz, 915MHz, etc.

**/opt/pktfwd**

==============================================================================

**rxhf@rhf2s208:/opt/pktfwd $ ls -l**

**total 708**

**drwxr-xr-x 7 root root 4096 Jul 23 04:18 cfg**

**-rw-r--r-- 1 root root 6522 Jul 24 02:16 global_conf.json**

**-rw-r--r-- 1 root root 185 Jul 23 06:19 local_conf.json**

**-rwxr-xr-x 1 root root 698940 Jul 23 04:18 lora_pkt_fwd**

**-rw-r--r-- 1 root root 226 Jul 23 04:18 pktfwd.conf**

**-rwxr-xr-x 1 root root 1200 Jul 23 04:18 update_gwid.sh**



**/opt/pktfwd/cfg**

==============================================================================

**rxhf@rhf2s208:/opt/pktfwd/cfg $ ls -l**

**total 20**

**drwxr-xr-x 2 root root 4096 Jul 23 04:18 434**

**drwxr-xr-x 2 root root 4096 Jul 23 04:18 470**

**drwxr-xr-x 2 root root 4096 Jul 23 04:18 780**

**drwxr-xr-x 2 root root 4096 Jul 23 04:18 868**

**drwxr-xr-x 2 root root 4096 Jul 23 04:18 915**



An example of a json configuration file is as follows: (868MHz)

```json
{
  "SX1301_conf": {
  "lorawan_public": true,
  "clksrc": 1,
  "antenna_gain": 0,
  "radio_0": {
  "enable": true,
  "type": "SX1257",
  "freq": 867500000,
  "rssi_offset": -166.0,
  "tx_enable": true,
  "tx_freq_min": 863000000,
  "tx_freq_max": 870000000
  },
  "radio_1": {
  "enable": true,
  "type": "SX1257",
  "freq": 868500000,
  "rssi_offset": -166.0,
  "tx_enable": false
  },
  // SX1301 MultiSF, standard LoRa and FSK channels
  "chan_multiSF_0": { "enable": true, "radio": 1, "if": -400000 },
  "chan_multiSF_1": { "enable": true, "radio": 1, "if": -200000 },
  "chan_multiSF_2": { "enable": true, "radio": 1, "if": 0 },
  "chan_multiSF_3": { "enable": true, "radio": 0, "if": -400000 },
  "chan_multiSF_4": { "enable": true, "radio": 0, "if": -200000 },
  "chan_multiSF_5": { "enable": true, "radio": 0, "if": 0 },
  "chan_multiSF_6": { "enable": true, "radio": 0, "if": 200000 },
  "chan_multiSF_7": { "enable": true, "radio": 0, "if": 400000 },
  "chan_Lora_std": { "enable": true, "radio": 1, "if": -200000, "bandwidth": 250000, "spread_factor": 7 },
  "chan_FSK": { "enable": true, "radio": 1, "if": 300000, "bandwidth": 125000, "datarate": 50000 },
  // RHF0M301-868
  "tx_lut_0": { "rf_power": -1, "dig_gain": 0, "mix_gain": 8, "pa_gain": 1 },
  "tx_lut_1": { "rf_power": 2, "dig_gain": 0, "mix_gain": 10, "pa_gain": 1 },
  "tx_lut_2": { "rf_power": 5, "dig_gain": 0, "mix_gain": 12, "pa_gain": 1 },
  "tx_lut_3": { "rf_power": 6, "dig_gain": 0, "mix_gain": 8, "pa_gain": 2 },
  "tx_lut_4": { "rf_power": 8, "dig_gain": 0, "mix_gain": 9, "pa_gain": 2 },
  "tx_lut_5": { "rf_power": 9, "dig_gain": 0, "mix_gain": 10, "pa_gain": 2 },
  "tx_lut_6": { "rf_power": 11, "dig_gain": 0, "mix_gain": 11, "pa_gain": 2 },
  "tx_lut_7": { "rf_power": 12, "dig_gain": 0, "mix_gain": 12, "pa_gain": 2 },
  "tx_lut_8": { "rf_power": 14, "dig_gain": 0, "mix_gain": 13, "pa_gain": 2 },
  "tx_lut_9": { "rf_power": 15, "dig_gain": 0, "mix_gain": 8, "pa_gain": 3 },
  "tx_lut_10": { "rf_power": 17, "dig_gain": 0, "mix_gain": 9, "pa_gain": 3 },
  "tx_lut_11": { "rf_power": 18, "dig_gain": 0, "mix_gain": 10, "pa_gain": 3 },
  "tx_lut_12": { "rf_power": 20, "dig_gain": 0, "mix_gain": 11, "pa_gain": 3 },
  "tx_lut_13": { "rf_power": 22, "dig_gain": 0, "mix_gain": 12, "pa_gain": 3 },
  "tx_lut_14": { "rf_power": 23, "dig_gain": 0, "mix_gain": 13, "pa_gain": 3 },
  "tx_lut_15": { "rf_power": 25, "dig_gain": 0, "mix_gain": 15, "pa_gain": 3 }
  },
  "gateway_conf": {
  "gateway_ID": "AA555A0000000000",
  /* change with default server address/ports, or overwrite in local_conf.json */
  "server_address": "localhost",
  "serv_port_up": 1680,
  "serv_port_down": 1680,
  /* adjust the following parameters for your network */
  "keepalive_interval": 10,
  "stat_interval": 3600,
  "push_timeout_ms": 100,
  "autoquit_threshold": 5,
  /* forward only valid packets */
  "forward_crc_valid": true,
  "forward_crc_error": false,
  "forward_crc_disabled": false,
  /* GPS reference coordinates */
  "ref_latitude": 0.0,
  "ref_longitude": 0.0,
  "ref_altitude": 0,
  /* Beaconing parameters */
  //"gps_tty_path": "/dev/ttyAMA0",
  "beacon_period": 128,
  "beacon_freq_hz": 869525000
  }
}
```

The Packet Forwarder configuration file itself is a json object (enclosed by '{' '}'), the root object contains two sub-objects, SX1301_conf and gateway_conf. SX1301_conf object is the configuration of the LoRa RF part, and gateway_conf is the configuration of the network communication layer (including server, gateway ID, etc.).

Since the global_conf.json file already contains all the Packet Forwarder configuration, in general the local_conf.json is only used to contain items that need to be changed frequently (e.g. gateway_ID), as follows.

```json
{
  "gateway_conf": {
  "gateway_ID": "AA555A0000000000",
  /* change with default server address/ports, or overwrite in local_conf.json */
  "server_address": "localhost",
  "serv_port_up": 1680,
  "serv_port_down": 1680
  }
}
```

Combined with the configuration file can be analyzed to consider the SX1301 has the following characteristics.

1. SX1301 chip with support for 2 Radio use, depending on the frequency its may be SX1255 or SX1257.
2. SX1301 can support up to 10 channels, including 8 Multi-SF channels, 1 general LoRa channel, and 1 FSK channel.
3. The single SX125x RF front-end has the following configuration limitations.

<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 32%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="header">
<th><p>Lower Side Channel</p>
<p>Bandwidth</p></th>
<th><p>Upper Side Channel</p>
<p>Bandwidth</p></th>
<th>SX125x Bandwidth</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>125KHz</td>
<td><strong>125KHz</strong></td>
<td>925KHz</td>
</tr>
<tr class="even">
<td>250KHz</td>
<td><strong>250KHz</strong></td>
<td>1MHz</td>
</tr>
<tr class="odd">
<td>500KHz</td>
<td><strong>500KHz</strong></td>
<td>1.1MHz</td>
</tr>
<tr class="even">
<td>125KHz</td>
<td><strong>250KHz</strong></td>
<td>962.5KHz</td>
</tr>
<tr class="odd">
<td>250KHz</td>
<td><strong>125KHz</strong></td>
<td>962.5KHz</td>
</tr>
<tr class="even">
<td>500KHz</td>
<td><strong>250KHz</strong></td>
<td>1.05MHz</td>
</tr>
<tr class="odd">
<td>250KHz</td>
<td><strong>500KHz</strong></td>
<td>1.05MHz</td>
</tr>
<tr class="even">
<td>500KHz</td>
<td><strong>125KHz</strong></td>
<td>1.0125MHz</td>
</tr>
<tr class="odd">
<td>125KHz</td>
<td><strong>500KHz</strong></td>
<td>1.0125MHz</td>
</tr>
</tbody>
</table>

The LoRa hardware block diagram is shown below.

![image-20210910175328931](https://wiki.risinghf.com/upload/img/2afbca410b3ad4da0c01b4787992cf8d.png)

#### 4.1.1. Customizing the channel

When users need to customize the json file to select different frequency bands, please follow the following rules to make changes.

1. According to the obtained SX1301_conf.radio_0.type and SX1301_conf.radio_1.type by the center frequency, the frequency greater than 520MHz is filled in SX1257, less than 520MHz is filled in SX1255.(Note: Please refer to the hardware manual of the corresponding device for the specific legal working frequency range of the device)

2. Consult the RHF-DS01603 manual to get the corresponding device configuration parameters according to the gateway band information, including RSSI calibration value and RF transmit power table. Change the values of SX1301_conf.radio_0.rssi_offset and SX1301_conf.radio_1.rssi_offset, and tx_lut_xxx table according to the obtained parameters.

3. Calculate the center frequency and the offset value of each IF channel according to the planned frequency scheme. and modify the values of SX1301_conf.radio_0.freq and SX1301_conf.radio_1.freq to determine the center frequency, then modify SX1301_conf.chan_multiSF_xxx, SX1301_conf.chan_Lora_std and SX1301_ conf.chan_FSK objects to determine the channel frequency.
    The channel configuration is subject to the following constraints.

    1. Each IF channel can be freely software configured with its associated radio0 or radio1. 2.

    2. each IF channel offset setting must not exceed the SX125x analysis bandwidth limit (previous table), otherwise the setting will be invalid.

    3. each IF channel can be freely enabled or disabled. 4.

4. the combination of the above information can be determined in the example of the json file selected and configured the following channels.

    1. CH0 868.1MHz Multi-SF

    2. CH1 868.3MHz Multi-SF

    3. CH2 868.5MHz Multi-SF

    4. CH3 867.1MHz Multi-SF

    5. CH4 867.3MHz Multi-SF

    6. CH5 867.5MHz Multi-SF

    7. CH6 867.7MHz Multi-SF

    8. CH7 867.9MHz Multi-SF

    9. CH8 868.3MHz LoRa Standard SF7/250KHz

    10. CH9 868.8MHz FSK 50Kbps

#### 4.1.2. Configure the server address

Edit the local_conf.json file. Change server_address to configure the address, change serv_port_up to configure the upstream data port, and change serv_port_down to configure the downstream data port.

// local_conf.json file

```json
{
  "gateway_conf": {
    "gateway_ID": "AA555A0000000000",
    "server_address": "localhost",
    "serv_port_up": 1680,
    "serv_port_down": 1680
  }
}
```

List of known servers:

<table style="width:100%;">
<colgroup>
<col style="width: 27%" />
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="header">
<th>Address</th>
<th><p>Uplink</p>
<p>Port</p></th>
<th><p>Downlink</p>
<p>Port</p></th>
<th><p>Packet Forward</p>
<p>Version</p></th>
<th>Supplier</th>
<th>Band</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>gateway.IoTSquare.xyz</td>
<td>1780</td>
<td>1780</td>
<td>V2</td>
<td>RisingHF</td>
<td>ALL</td>
</tr>
<tr class="even">
<td>Iot.semtech.com</td>
<td>1680</td>
<td>1680</td>
<td>V1/V2</td>
<td>Semtech</td>
<td>EU868</td>
</tr>
<tr class="odd">
<td>us01-iot.semtech.com</td>
<td>1780</td>
<td>1780</td>
<td>V1/V2</td>
<td>Semtech</td>
<td>US915</td>
</tr>
<tr class="even">
<td>cn1.loriot.io</td>
<td>1780</td>
<td>1780</td>
<td>V1/V2</td>
<td>Loriot</td>
<td>All</td>
</tr>
<tr class="odd">
<td>ap1.loriot.io</td>
<td>1780</td>
<td>1780</td>
<td>V1/V2</td>
<td>Loriot</td>
<td>All</td>
</tr>
<tr class="even">
<td>au1.loriot.io</td>
<td>1780</td>
<td>1780</td>
<td>V1/V2</td>
<td>Loriot</td>
<td>All</td>
</tr>
<tr class="odd">
<td>eu1.loriot.io</td>
<td>1780</td>
<td>1780</td>
<td>V1/V2</td>
<td>Loriot</td>
<td>All</td>
</tr>
<tr class="even">
<td>sa1.loriot.io</td>
<td>1780</td>
<td>1780</td>
<td>V1/V2</td>
<td>Loriot</td>
<td>All</td>
</tr>
<tr class="odd">
<td>us1.loriot.io</td>
<td>1780</td>
<td>1780</td>
<td>V1/V2</td>
<td>Loriot</td>
<td>All</td>
</tr>
<tr class="even">
<td>router.eu.thethings.network</td>
<td>1700</td>
<td>1700</td>
<td>V1</td>
<td>TTN</td>
<td><p>EU433</p>
<p>EU868</p></td>
</tr>
<tr class="odd">
<td>router.us.thethings.network</td>
<td>1700</td>
<td>1700</td>
<td>V1</td>
<td>TTN</td>
<td>US915</td>
</tr>
<tr class="even">
<td>router.cn.thethings.network</td>
<td>1700</td>
<td>1700</td>
<td>V1</td>
<td>TTN</td>
<td><p>CN470</p>
<p>CN780</p></td>
</tr>
<tr class="odd">
<td>router.au.thethings.network</td>
<td>1700</td>
<td>1700</td>
<td>V1</td>
<td>TTN</td>
<td>AU915</td>
</tr>
</tbody>
</table>

#### 4.1.3. Selecting a pre-configured frequency scheme

Use the ln command to point the global_conf.json to the desired file for selecting the preconfigured frequency scheme. The user can also create custom json files as described in the previous section.

```sh
sudo ln -sf cfg/xxx/global_conf_xxx.json global_conf.json
```

::: warning

Note. 1:

1. Note that global_conf_xxx.json is replaced with the real file name. 2.
2. For other files not listed in the table below, please calculate the channel frequencies according to the method described in the previous section.

:::

<table>
<colgroup>
<col style="width: 8%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="header">
<th>CH</th>
<th>eu868</th>
<th>us915</th>
<th>eu433</th>
<th>cn780</th>
<th>as920</th>
<th>cn470</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>867.1</td>
<td>902.3</td>
<td>433.175</td>
<td>779.5</td>
<td>923.2</td>
<td>470.3</td>
</tr>
<tr class="even">
<td>1</td>
<td>867.3</td>
<td>902.5</td>
<td>433.375</td>
<td>779.7</td>
<td>923.4</td>
<td>470.5</td>
</tr>
<tr class="odd">
<td>2</td>
<td>867.5</td>
<td>902.7</td>
<td>433.575</td>
<td>779.9</td>
<td>923.6</td>
<td>470.7</td>
</tr>
<tr class="even">
<td>3</td>
<td>867.7</td>
<td>902.9</td>
<td>433.775</td>
<td>780.1</td>
<td>923.8</td>
<td>470.9</td>
</tr>
<tr class="odd">
<td>4</td>
<td>867.9</td>
<td>903.1</td>
<td>433.975</td>
<td>780.3</td>
<td>924.0</td>
<td>471.1</td>
</tr>
<tr class="even">
<td>5</td>
<td>868.1</td>
<td>903.3</td>
<td>434.175</td>
<td>780.5</td>
<td>924.2</td>
<td>471.3</td>
</tr>
<tr class="odd">
<td>6</td>
<td>868.3</td>
<td>903.5</td>
<td>434.375</td>
<td>780.7</td>
<td>924.4</td>
<td>471.5</td>
</tr>
<tr class="even">
<td>7</td>
<td>868.5</td>
<td>903.7</td>
<td>434.575</td>
<td>780.9</td>
<td>924.6</td>
<td>471.7</td>
</tr>
<tr class="odd">
<td>8</td>
<td><p>868.3</p>
<p>BW250</p>
<p>SF7</p></td>
<td><p>903.0</p>
<p>BW500</p>
<p>SF8</p></td>
<td>OFF</td>
<td>OFF</td>
<td>OFF</td>
<td>OFF</td>
</tr>
<tr class="even">
<td>9</td>
<td><p>868.8</p>
<p>FSK</p>
<p>50Kbps</p></td>
<td>OFF</td>
<td>OFF</td>
<td>OFF</td>
<td>OFF</td>
<td>OFF</td>
</tr>
</tbody>
</table>

#### 4.1.4. Start the packet forwarder service

Start the pktfwd service by executing the following command.

```shell
sudo systemctl enable pktfwd
sudo systemctl restart pktfwd
```

#### 4.1.5. Shutting down the packet forwarder service

Stop the pktfwd service by executing the following command.

```shell
sudo systemctl disable pktfwd
sudo systemctl stop pktfwd
```

### 4.2. IoTSquare server

IoTSquare (<https://iotsquare.xyz>) IoT platform is a dedicated LoRa device management platform developed by Rexing Hengfang, with functions of creating users, registering nodes, gateways, and multicast group management, etc. Currently, IoTSquare IoT platform only supports lorawan 1.0.2 version of LoRa device access. IoTSquare now supports cn470, cn470prequel, eu868, as923, us915, au915 and other frequency bands. Users who want to use the server can send an email (support@risinghf.com) to request a test account.

Before using it, please take care to browse the [**IoTSquare IoT Platform User Manual**](https://doc.iotsquare.xyz/docs/manual/iotsquare), and assuming that the user already has an account on this server, please follow these steps.

#### 4.2.1. Register RHF2S208 Gateway

1. Obtain the Gateway ID of the gateway

   Login to the web interface of the gateway, enter the "Server Related->IoTSquare Bridge" menu, the "Gateway ID" text box on the page is the Gateway ID of the gateway. If the bridge is not started, users need to manually click the "Start" button to start it.

   If the bridge is not started, you need to manually click the "Start" button to start it. [image-20210910180156452](https://wiki.risinghf.com/upload/img/bff0f14ae726deea8e9d4711a431c6df.png) 2.

2. [Register Gateway](https://doc.iotsquare.xyz/docs/manual/iotsquare/#_6-%E7%BD%91%E5%85%B3%E7%AE%A1%E7%90%86)

Enter IoTSquare server, enter "Gateway Management->Add Gateway" menu, fill in the Gateway ID you just got to the Gateway ID and click "Confirm Add" to register, the information about adding gateway to the server can be Check the server documentation, this document will not be described one by one.

![image-20210910180231554](https://wiki.risinghf.com/upload/img/32416d62e82201b2f208bf95167c71bf.png)

3. Confirm whether the gateway is online

   After registering the gateway successfully, you can see the gateway online under the menu of "Gateway Management -> Gateway List". If it is not online, execute the command [5.2.2](#start iotsquare service) to start the service.

   ![image-20210910180256979](https://wiki.risinghf.com/upload/img/fd8ff60a415e15c50fa2f72262865bfb.png)

#### 4.2.2. Starting iotsquare service

Start the iotsquare service by executing the following command.

```shell
sudo systemctl enable rhf-bridge
sudo systemctl restart rhf-bridge
sudo systemctl enable iotsquare-pktfwd
sudo systemctl restart iotsquare-pktfwd
```

#### 4.2.3. Shut down iotsquare service

Execute the following command to stop the iotsquare service.

```shell
sudo systemctl disable iotsquare-pktfwd
sudo systemctl stop iotsquare-pktfwd
```

#### 4.2.4. [Add Application](https://doc.iotsquare.xyz/docs/manual/iotsquare/#_3-%E5%BA%94%E7%94%A8%E7%AE%A1%E7%90%86)

Go to "Application Management->Add Application" menu, fill in the relevant fields and click "Confirm Add". If you have already added an application, you can ignore this step.

![image-20210910180422384](https://wiki.risinghf.com/upload/img/8efb7705ab2e08419d065fa6c5419ede.png)

#### 4.2.5. [Register Node](https://doc.iotsquare.xyz/docs/manual/iotsquare/#_4-%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86)

Enter the application you just added, click Add Device, and you can choose to add "Add ABP Device", "Add OTAA Device" and "Bulk Add". Here select "Add OATT Device" for example, fill in the corresponding node information, and click "Confirm Add" to register the node.

![image-20210910180448735](https://wiki.risinghf.com/upload/img/0e89f67b4d17850f022c2173791de6d7.png)

#### 4.2.6. Sending and Receiving Data

1. Set node parameters

   The user connects to the node through the serial port and sends the following command to set the node.

   >AT+FDEFAULT
   >
   >AT+ID=DEVEUI, 8CF9572000000011
   >
   >AT+ID=APPEUI, 8CF9572000000000
   >
   >AT+KEY=APPKEY, 0123456789ABCDEF0123456789ABCDEF
   >
   >AT+MODE=LWOTAA
   >
   >AT+DR=CN470
   >
   >AT+CH=NUM,0-7
   >
   >AT+JOIN

2. send data node

   > AT+CMSG=111

   ![image-20210910180544129](https://wiki.risinghf.com/upload/img/727c76685fec5ce6610945fbccb6c0b3.png)

#### 4.2.7. Other features

IotSquare server expands some other functions besides the most basic LoRaWAN upstream and downstream communication. For example: [Gateway Information Management](https://doc.iotsquare.xyz/docs/manual/iotsquare/#_7-%E7%BD%91%E5%85%B3%E4%BF%A1%E6%81%AF), [Multicast Management](https://doc.iotsquare. xyz/docs/manual/iotsquare/#_8-%E5%A4%9A%E6%92%AD%E7%AE%A1%E7%90%86) and IotSquare upgrade and other functions. For more detailed features, please refer to IotSquare online documentation: <https://doc.iotsquare.xyz/docs/manual/iotsquare>.

### 4.3. loriot server

loriot (<https://www.loriot.io>) is a Swiss web server operator providing LoRaWAN servers, offering free accounts for users to test and register on their own.

Before using it, please take note of loriot's online documentation <https://cn1.loriot.io/documentation> (the subdomain prefix will be different depending on the region chosen, this documentation uses the cn1.loriot.io server address as an example).

#### 4.3.1. Register RHF2S208 Gateway

1. First, you need to get the MAC address of the device. A label with MAC address will be pasted on the side of the device. You can also check the MAC address of the device by logging into the device by means of the command ifconfig, or by connecting to the device's WiFi and logging into the device's built-in web interface to check the MAC address information.

rxhf@rhf2s208:\~$ ifconfig

===========================================================================

eth0: flags=4099\<UP,BROADCAST,MULTICAST> mtu 1500

ether b8:27:eb:d3:18:d9 txqueuelen 1000 (Ethernet)

RX packets 0 bytes 0 (0.0 B)

RX errors 0 dropped 0 overruns 0 frame 0

TX packets 0 bytes 0 (0.0 B)

TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0

![image-20210910180657127](https://wiki.risinghf.com/upload/img/2b246516d8d139d500f41543e91de854.png)

2. Log in to <http://cn1.loriot.io> to register your account, or log in directly if you already have an account.

3. Click Dashboard -> Networks -> Name -> Add Gateway and select the gateway model RHF2S008/ RHF2S208.

   ![image-20210910180726502](https://wiki.risinghf.com/upload/img/cda074f5d0af76a3c23db621ba2544ec.png)

4. When registering the gateway, please select the correct RF front-end for.

   1. 868/915 MHz (SX1257)

   2. 434/470/780 MHz (SX1255)

      ![image-20210910180753335](https://wiki.risinghf.com/upload/img/f07254ecc2aaef1d6ef5579ed549dc0b.png)

5. Fill in the MAC address and the installation location information of the gateway.

   ![image-20210910180819248](https://wiki.risinghf.com/upload/img/0bf97619af2a3702e3d28ba52ec4cf18.png)

   ![image-20210910180856580](https://wiki.risinghf.com/upload/img/6c30b47c61e276dc9cd57de3b2597d1e.png)

6. Click "Register RisingHF RHF2S208 gateway" to finish the gateway registration.

7. Click the "Gateways" list to enter the gateway configuration interface.

   ![image-20210910180924543](https://wiki.risinghf.com/upload/img/a770c65b3ba5704a31a467464b00518d.png)

8. Select the correct band and frequency plan according to the gateway model. Please contact <support@risinghf.com> if you need more assistance.

9. Complete the gateway registration and configuration.

10. Login to the gateway and start LoRaWAN communication test.

#### 4.3.2. Start loriot service

Execute the following command to start the loriot service.

```shell
sudo systemctl enable loriot-gw
sudo systemctl restart loriot-gw
```

#### 4.3.3. Shutting down the loriot service

Stop the loriot service by executing the following command.

```shell
sudo systemctl disable loriot-gw
sudo systemctl stop loriot-gw
```

:::warning

Note: If you want to start the loriot-gw service, please make sure to stop the pktfwd service first to avoid starting two services at the same time and conflict with each other.

:::

#### 4.3.4. Configuring the gateway frequency

The loriot gateway configuration items are configured in the cloud, open loriot console and find the corresponding gateway page, you can select the corresponding frequency band in the Frequency plan. Please refer to the loriot Frequency Definition Table online documentation for specific frequency definitions.

<https://cn1.loriot.io/home/documentation.html#docu/frequency-plan>

#### 4.3.5. loriot firmware upgrade

Please download the loriot-risinghf-rhf2s008-xxxxxx-SPI-0-latest.bin file from the gateway registration page and replace it with /opt/loriot/loriot.

sudo su

cd /opt/loriot

wget URL -O loriot

Replace the URL with the connection address obtained from the gateway page.

## 5. Advanced applications

### 5.1. backhaul network

#### 5.1.1. Cellular Network (LTE/4G/3G)

The RHF2S208 device is embedded with a system service named lte, which is started by system default. The lte dialing log can be viewed using the following command.

```shell
sudo journalctl -f -n 200 -u lte
```

Features:                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

- **can perform automatic recognition of SIM cards and generate APN information**

- **Support SIM card hot-swap operation**

- **Does not support roaming function**

Use the following commands to further analyze the network status of the gateway.

- ifconfig ppp0

  The gateway dials successfully, and the system will generate a ppp0 device.

  ```shell
  rxhf@RHF2S208:\~$ ifconfig ppp0
  ppp0 Link encap:Point-to-Point Protocol
    inet addr:10.65.6.136 P-t-P:10.64.64.64 Mask:255.255.255.255
    UP POINTOPOINT RUNNING NOARP MULTICAST MTU:1500 Metric:1
    RX packets:5 errors:0 dropped:0 overruns:0 frame:0
    TX packets:5 errors:0 dropped:0 overruns:0 carrier:0
    collisions:0 txqueuelen:3
    RX bytes:56 (56.0 B) TX bytes:80 (80.0 B)
  ```

- sudo ltesim

  Use the command "sudo ltesim" to verify if the gateway has a SIM card inserted.

  ```shell
  ltesim: lte sim start
  ltesim: OK, SIM inserted
  ltesim: lte sim done
  ```

- sudo lterssi

  When the LTE connection is successful, the lterssi command can be used to confirm the 4G signal quality.

  ```shell
  lterssi: lte rssi start
  lterssi: OK, RSSI: -77
  lterssi: lte rssi done
  // -77 is the signal strength
  If the LTE connection fails, the log shows an error.
  ERROR: Celluar network disconnected
  sudo

- sudo lteimei

  Use "sudo lteimei" to read the IMEI code of the device.

  ```shell
  lteimei: lte imei start
  lteimei: OK, 867012030910415
  lteimei: lte imei done
  ```

- sudo ltediagnosis

  If you want to perform a fault analysis of the LTE network connection, you can use the command "sudo ltediagnosis".

  ```shell
  ltediagnosis: lte diagnosis start
  ltediagnosis: OK, usb bus normal
  ltediagnosis: OK, lte modem normal
  ltediagnosis: OK, SIM inserted
  ltediagnosis: OK, RSSI: -79
  carrier: China Mobile IoT
  ltediagnosis: OK, 460042462508259
  ltediagnosis: lte diagnosis done
  ```

- Add APN

  The APN configuration of most of the major global carriers is already included in the device system. However, users can also add more APN configuration information by using the "addapn" command. Use "addapn
  --help" for help on using this command.

  ```shell
  rxhf@rhf2s208:\~ $ addapn --help
  Usage: addapn \[options\]
  
  Options:
    --help Show this help
    --carrier \<CARRIER> Set carrier name
    --mcc \<MCC> Set carrier mcc
    --mnc \<MNC> Set carrier mnc
    --apn \<APN> Set carrier apn
    --user \<USER> Set apn user
    --pwd \<PWD> Set apn pwd
    
  Examples:
    addapn --carrier CARRIER --mcc MCC --mnc MNC --apn APN --user USER --pwd PWD
    addapn --carrier CARRIER --mcc MCC --mnc MNC --apn APN
  ```

- Deleting APNs

  If you want to delete the extra apn, you can use the command "delapn", and you can also use "delapn --help" to get the help information of this command.

  ```shell
  rxhf@rhf2s208:\~ $ delapn --help
  Usage: delapn \[options\]
  Options:
    --help Show this help
    --carrier \<CARRIER> Delete carrier apn
    --apn \<APN> Delete apn
  Examples:
    delapn --carrier CARRIER
    delapn --carrier CARRIER --apn APN
  ```

- Finding APNs

  You can use the command "selapn" to find out if the apn of your sim card already exists, if not, you can add the apn of the card by using addapn, you can also use "selapn --help" to get the help information of this command.

  ```shell
  rxhf@rhf2s208:\~ $ selapn --help
  Usage: selapn \[options\]
  
  Options:
    --help Show this help
    --carrier \<CARRIER> Select carrier name
    --mcc \<MCC> Select carrier mcc
    --mnc \<MNC> Select carrier mnc
    --apn \<APN> Select carrier apn
    
  Examples:
    selapn
    selapn --carrier CARRIER --mcc MCC --mnc MNC --apn APN
  ```

#### 5.1.2. 10/100m Ethernet

When the gateway is wired to the Ethernet, the device can get the port of eth0. The command ifconfig allows you to read the ip assigned to the device LAN. you can verify the communication quality of the network by using the command ping.

![image-20210910182025547](https://wiki.risinghf.com/upload/img/5f087424ab4f66569cf782e76c74f040.png)

#### 5.1.3. Backhaul Network Priority Selection

RHF2S208 supports using 4G LTE cellular network or wired 10/100m network to connect to the cloud server. The default configuration is wired priority, you can also reset the backhaul network priority in the built-in web
UI, you can also reset the backhaul network priority in the built-in web interface. You can check if the configuration takes effect by using the command "route".

![image-20210910182100685](https://wiki.risinghf.com/upload/img/376a1a57047ab4c17949d6e359b08f5d.png)

![image-20210910182119624](https://wiki.risinghf.com/upload/img/a83d4d86479b618134434dc01955a1ad.png)

### 5.2. WiFi access

Select WiFi signal scan on the computer to get the SSID of the gateway, the SSID of the gateway is named according to RHF2S208_XXXXXX, then click connect to the WiFi of the gateway, enter the password RisingHF_XXXXXX to connect, the last 6 bits of the password and the last 6 bits of the SSID of the gateway are the same, both are 3byte capital letters at the end of the MAC address. After successful connection, you can use 192.168.8.1 to log in the device or open the built-in web UI configuration interface.

![image-20210910182158591](https://wiki.risinghf.com/upload/img/6a5e8af38fa866f1c72663e19dc7079f.png)

![image-20210910182210000](https://wiki.risinghf.com/upload/img/a5e4068828b146520dd25a9b1578c1cd.png)

You can also use the command "ifconfig" to verify that the gateway is open on port wlan0.

![image-20210910182230671](https://wiki.risinghf.com/upload/img/430fe28518ded632cfe6514fd9927f8b.png)

### 5.3. Using GPS function

RHF2S208 has embedded GPS module (MAX-7Q), which supports GPS function, LoRaWAN Class B standard hardware. It can be accessed by **/dev/serial1**, default baud rate 9600.

The following command can be used to simply test the GPS module's function.

```shell
sudo gpstest
```

A message similar to the following can be obtained.

```shell
$GPRMC,061417.00,A,2232.87469,N,11356.01189,E,0.245,,240719,,,D\*7E
$GPVTG,,T,,M,0.245,N,0.455,K,D\*21
$gpgga,061417.00,2232.87469,n,11356.01189,e,2,05,3.67,69.1,m,-2.7,m,,0000\*7f
$GPGSA,A,3,06,02,40,12,05,,,,,,,,8.61,3.67,7.79\*00
$GPGSV,3,1,10,02,34,303,31,05,31,223,35,06,48,000,17,09,30,091,\*71
$GPGSV,3,2,10,12,23,312,33,17,58,083,,19,63,049,,23,11,056,\*79
$GPGSV,3,3,10,28,23,170,,40,20,257,29\*78
$gpgll,2232.87469,n,11356.01189,e,061417.00,a,d\*6d
````

::: warning

Note: When testing the GPS module function, please close other programs that use the GPS module first. The services related to the LoRa process of the general device will occupy the GPS module.

:::

### 5.4. temperature monitoring

RHF2S208 integrates a high precision temperature sensor inside the device, which can monitor the internal temperature of the device in real time. You can either use the command "sudo get_temp" to query the internal temperature in real time, or log in to the gateway web interface.

```shell
sudo get_temp
40.25 // value return ℃
```

In the gateway web interface, the temperature parameters will be refreshed once a minute. Users can also download historical temperature logs from the log download page.

![image-20210910182631776](https://wiki.risinghf.com/upload/img/a73a540025a3010029daca21532a4166.png)

![image-20210910182647886](https://wiki.risinghf.com/upload/img/e3a09c023647d7b2b9957361ff1f0e5b.png)

### 5.5. RTC

With the help of the internal RTC clock, the gateway system will be synchronized with the UTC clock in real time. You can query the synchronized time with the following command.

```shell
sudo hwclock -r
2018-08-04 08:18:33.770069+0000 // synchronized time
```

### 5.6. ambient bottom noise scan

The RHF2S208 has a built-in bottom noise analysis engine which helps users to perform environmental bottom noise scanning and analysis in the field for network optimization. Please login to the built-in web interface of the device to perform the bottom noise scanning and analysis, please refer to section [4.2.2](\l) for details.

Ambient bottom noise is an important indicator parameter affecting wireless communication. If you need to set up and install the gateway in the field, make sure to do a preliminary analysis of the environmental noise in the field to avoid high noise or strong interference affecting the communication distance and communication reliability. We hope that the environmental noise is as low as possible, but the reality of the environment is impossible to completely free of interference or noise. It is generally recommended that the bottom of the ambient noise is around -110dBm is more ideal. Usually also allows noise up to no more than -100dBm, otherwise the communication distance will be severely limited. If the noise is above -95dBm, it is strongly recommended to change the operating band to avoid interference noise.																																																																																																																																																																																																																																							

### 5.7. Getting Remote Assistance Support

The RHF2S208 has a built-in service called RSSH, which is off by default. This service can be used to connect to a remote server, making the RHF2S208 device accessible from a remote location. (Note: This feature is only available when RisingHF is providing remote support to customers)

Go to "Network Configuration->RSSH Operation" menu in the web interface, click "Start RSSH" button, you will get the port number for remote login. When seeking remote support, please contact 请发送如下截图至support@risinghf.com and explain the problem. We will have someone visit your device for troubleshooting.

![image-20210910182835448](https://wiki.risinghf.com/upload/img/c1f59752647eff99859a261d68250ab2.png)

::: warning

Note: After troubleshooting is completed, please turn off RSSH to reduce the risk of network attacks on your device.

:::

## 6. Restore factory settings

### 6.1. Download image

Please contact <support@risinghf.com> or visit <http://wiki.risinghf.com> to get the image download address.

### 6.2. Bootloader Mode

Perform the following steps to put the RHF2S208 into Bootloader mode.

1. Disconnect the power of RHF2S208

2. Connect the RHF2S208 to the PC via Micro USB cable

3. re-power the RHF2S208

4. Enter Bootloader mode.

### 6.3. Program

Check the online documentation to re-burn the RHF2S208 firmware. [Link](

## 7. Contact

Please contact with sales@risinghf.com for detailed information.

