---
permalink: /03/04/01/01/
title: IoTSquare单机部署指南
date: 2024-09-26 11:00:00
---

## 简介

瑞兴恒方网络服务器 iotsquare 是一款专为小型 LoRaWAN 网络定制打造的微型数据平台。 依托 iotsquare 平台，用户可以简单快速地对所部署的 LoRaWAN 网络进行调试测试、运维 管理、应用数据管理。可支持最高 300 台网关和 100K 个节点的接入量。

得益于瑞兴恒方在 LoRaWAN 领域的多年技术积累和沉淀，iotsqaure 提供了完善的预设区 域频率计划，例如 CN470、EU868、AS923、US915等，可覆盖国内外常用频段。

连接方面，iotsquare 平台完全兼容 LoRaWAN 标准，并可与瑞兴恒方全线网关及节点产品无 缝对接，帮助设备制造企业快速实现物联能力，同时也可按需定制高级特性，为特定应用场景 提供针对性优化。

## 基础功能

- 支持 LoRaWAN 标准协议
  - 支持所有 V1.0.x 协议，如 V1.0.2、V1.0.2B、V1.0.3 等
  - 支持 Class A、B、C 类设备接入
  - 下行接收窗口动态调度算法，提供高效下行数据调度机制
  - 支持自动 MACCMD 下发功能
  - 支持 ADR 功能
- 支持中英文双语界面，一键极速转换
- 提供设备权限管理，设备基于权限与云端通信
- 完整的设备管理，支持设备注册、在线调试、设备删除、分组管理、数据导出、数据分析
- 提供设备上下线变更通知服务，方便实时获取设备状态
- 提供数据存储能力，方便用户海量设备数据的存储及实时访问
- 提供设备与云端的上下行通道，为设备上报与指令下发提供稳定可靠的支撑

## 灵活的网关接入接口

- 支持 iotsquare SDK 方式接入
  - 使用 TLS 加密传输，可提供更好的网络稳定性、安全性与实时性
  - 高效数据压缩功能，比 Packet Forwarder 接入方式可以减少 50% 以上的流量传输
- 支持 UDP 方式接入，兼容 Semtech 标准 Packet Forwarder 协议
- 详细的网关连接状态监控日志，帮助用户简化网络管理

## 为用户呈现完整的数据流

多数的 LoRaWAN 应用服务止步于应用层数据推送，以至于难以解决协议栈及硬件开发以及 网络运维方面的问题。基于此原因 iotsqaure 提供了从 LoRaWAN 协议层到用户应用层的完 整数据流，包括网关、节点实时数据、历史数据，可覆盖应用层、协议层的全部信息，支持在 线下发、数据跟踪，帮助客户快速开发新产品，简化网络运维流程。

## 简单易用的数据平台接口

- 按应用配置的 HTTP/HTTPS 数据推送，可配置请求头部，实现用户自定义认证、授权功能
- interface-tools 工具在应用开启 MQTT 调试功能时，可为NAT内网用户提供与公网环境 相同的数据推送
- 开放接口支持通过token认证，可获取节点与网关配置数据


## 可扩展架构及灵活的部署方式
- iotsquare 提供免费在线测试账户，并开放完整调试权限与推送接口，所见即所得
- iotsquare 后端采用可扩展的微服务架构与容器技术，支持灵活的部署方式
  - 单机部署，最大程度压缩客户成本
  - 跨主机集群部署，可在不停机情况下，水平拓展系统负载能力
- 支持部署至国内外主要云服务商（用户需自行购买虚拟主机及相关服务）
  - 阿里云
  - 腾讯云
  - Amazon AWS
  - Google Cloud
- 支持部署至用户提供的独立机房

### 基于企业内网部署
在企业内网部署 IoTSquare 时,其所有组成部分都是完全独立隔离于企业内外网络之中的封闭系统。

---

![内网部署](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/20240626180927.png)

---

### 基于云平台部署
基于云平台的部署方案中 IoTSquare 部署于客户云平台网络，通过云平台网络与客户应用服务器进行通信，节点及网关则通过互联网接入 IoTSquare。

---

![云平台部署](https://risinghf-wiki.oss-cn-shenzhen.aliyuncs.com/upload/img/20240626180952.png)

---


## 服务器配置要求

根据客户目标网络容量不同，服务器主机配置可以进行差异化选择，以节省成本。

利用云服务器部署时请不要选择用于开发测试环境的低配型虚拟机，如果选择云供应商，
网关部署在中国内的建议选择阿里云的云服务器，网关部署在国外的建议选择亚马逊AWS EC2。

| 网络规模               | 微型         | 小型      | 中型      | 大型     |
| :----------------------: | :------------: | :---------: | :---------: | :--------: |
| 网关数量               | 1-50         | 1-50      | 1-100     | 100-300  |
| 节点数量               | 5k           | 5k        | 10k       | 100K     |
| 节点每秒上行数据包总数 | <5           | < 40      | < 80      | < 200    |
| 部署模式               | 单机部署     | 单机部署  | 单机部署  | 单机部署 |
| CPU                    | 1~2核        | 4核       | 8核       | 8核      |
| 内存                   | 2GB          | 4G        | 8G        | 16G      |
| 硬盘                   | 40GB SSD/HDD | 128GB SSD | 512GB SSD | 1TB SSD  |
| 网络                   | 千兆         | 千兆      | 千兆      | 千兆     |

### 操作系统要求
* 发行版: Ubuntu 20.04-22.04、CentOS 7.9 
* Linux内核5.0以上

### 部署流程(瑞兴协助部署)

1. 客户根据所需购买的网络规模，根据推荐配置购置服务器或/云服务器/云虚拟机，需要安装CentOS7.9或更高版本、Ubuntu20.04或更高版本的操作系统
2. 客户提供服务器登录方式，包括：
   * SSH私钥、SSH密码、SSH服务器公网IP、SSH服务器公网端口
   * VPN登录软件及账号，如MotionPro Plus
   * 远程软件如向日葵的远程机器ID+访问密码
   * 远程软件如AnyDesk的远程机器ID+访问密码
   * 远程软件如ToDesk的远程机器ID+访问密码
   * 远程软件Windows远程IP、端口、账号密码
3. 瑞兴恒方的工程师根据客户所选配置进行IoTSquare安装部署，正常情况下1-3个工作日内完成
5. 部署完成后邮件通知客户进行测试并验收
6. 客户验收后通知瑞兴恒方，同时移除第2步的服务器访问权限。
7. 完成
   注意事项：
   客户应提供运维工程师或服务端开发人员联系方式，以备出现异常情况时及时沟通
